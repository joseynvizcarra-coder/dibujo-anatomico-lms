<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="M√≥dulo 4: Figura Completa - LMS Dibujo Anat√≥mico UAH">
    <title>M√≥dulo 4: Figura Completa - LMS UAH</title>
    
    <style>
        :root {
            --primary-dark: #2c5f66;
            --primary-light: #e8a2b8;
            --dark: #1a1a1a;
            --white: #ffffff;
            --gray-light: #f5f5f5;
            --gray-medium: #666666;
            --success: #4CAF50;
            --warning: #FFC107;
            --danger: #f44336;
            --info: #2196F3;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: var(--gray-light);
            color: var(--dark);
            line-height: 1.6;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, var(--primary-dark) 0%, var(--dark) 100%);
            color: white;
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .back-btn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: white;
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            transition: background 0.3s;
        }

        .back-btn:hover {
            background: rgba(255,255,255,0.1);
        }

        .module-title {
            font-size: 1.5rem;
        }

        .module-progress {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .progress-text {
            font-size: 1.2rem;
            font-weight: bold;
        }

        /* Layout */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 2rem;
        }

        /* Sidebar */
        .sidebar {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            height: fit-content;
            position: sticky;
            top: 100px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .lesson-list {
            list-style: none;
        }

        .lesson-item {
            margin-bottom: 0.5rem;
        }

        .lesson-link {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            border-radius: 8px;
            text-decoration: none;
            color: var(--dark);
            transition: all 0.3s;
            cursor: pointer;
        }

        .lesson-link:hover {
            background: var(--gray-light);
        }

        .lesson-link.active {
            background: linear-gradient(135deg, var(--primary-dark), var(--primary-light));
            color: white;
        }

        .lesson-number {
            width: 30px;
            height: 30px;
            background: var(--gray-light);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9rem;
        }

        .lesson-link.active .lesson-number {
            background: rgba(255,255,255,0.3);
        }

        .lesson-link.completed .lesson-number {
            background: var(--success);
            color: white;
        }

        /* Main Content */
        .content {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .content-header {
            border-bottom: 2px solid var(--gray-light);
            padding-bottom: 1.5rem;
            margin-bottom: 2rem;
        }

        .lesson-title {
            font-size: 2rem;
            margin-bottom: 0.5rem;
            color: var(--dark);
        }

        .lesson-meta {
            display: flex;
            gap: 2rem;
            color: var(--gray-medium);
            font-size: 0.9rem;
        }

        .lesson-content {
            margin-bottom: 2rem;
        }

        .lesson-content h2 {
            font-size: 1.5rem;
            margin: 2rem 0 1rem;
            color: var(--primary-dark);
        }

        .lesson-content h3 {
            font-size: 1.2rem;
            margin: 1.5rem 0 0.8rem;
            color: var(--dark);
        }

        .lesson-content p {
            margin-bottom: 1rem;
            line-height: 1.8;
        }

        .lesson-content ul,
        .lesson-content ol {
            margin-left: 2rem;
            margin-bottom: 1rem;
        }

        .lesson-content li {
            margin-bottom: 0.5rem;
        }

        /* Interactive Elements */
        .exercise-box {
            background: linear-gradient(135deg, #f0f4ff, #fef0f5);
            border-left: 4px solid var(--primary-dark);
            padding: 1.5rem;
            border-radius: 8px;
            margin: 2rem 0;
        }

        .exercise-title {
            font-weight: bold;
            color: var(--primary-dark);
            margin-bottom: 1rem;
            font-size: 1.1rem;
        }

        .tip-box {
            background: #fff9e6;
            border-left: 4px solid var(--warning);
            padding: 1rem;
            border-radius: 8px;
            margin: 1.5rem 0;
        }

        .tip-box::before {
            content: 'üí° ';
            font-size: 1.2rem;
        }

        .integration-box {
            background: #f0fff4;
            border-left: 4px solid var(--success);
            padding: 1.5rem;
            border-radius: 8px;
            margin: 2rem 0;
        }

        .integration-box::before {
            content: 'üîó ';
            font-size: 1.2rem;
        }

        /* Image Gallery */
        .image-gallery {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }

        .gallery-item {
            background: var(--gray-light);
            border-radius: 8px;
            overflow: hidden;
            cursor: pointer;
            transition: transform 0.3s;
        }

        .gallery-item:hover {
            transform: scale(1.05);
        }

        .gallery-item img {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .gallery-caption {
            padding: 0.8rem;
            font-size: 0.9rem;
            text-align: center;
            color: var(--gray-medium);
        }

        /* Video Player */
        .video-container {
            position: relative;
            padding-bottom: 56.25%;
            height: 0;
            margin: 2rem 0;
            background: var(--gray-light);
            border-radius: 8px;
            overflow: hidden;
        }

        .video-placeholder {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: var(--gray-medium);
        }

        .play-button {
            width: 80px;
            height: 80px;
            background: var(--primary-dark);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2rem;
            cursor: pointer;
            transition: all 0.3s;
            margin-bottom: 1rem;
        }

        .play-button:hover {
            background: var(--primary-light);
            transform: scale(1.1);
        }

        /* Quiz Section */
        .quiz-container {
            background: var(--gray-light);
            padding: 2rem;
            border-radius: 12px;
            margin: 2rem 0;
        }

        .quiz-question {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            color: var(--dark);
        }

        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .quiz-option {
            padding: 1rem;
            background: white;
            border: 2px solid transparent;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .quiz-option:hover {
            border-color: var(--primary-light);
        }

        .quiz-option.selected {
            border-color: var(--primary-dark);
            background: rgba(44, 95, 102, 0.1);
        }

        .quiz-option.correct {
            border-color: var(--success);
            background: rgba(76, 175, 80, 0.1);
        }

        .quiz-option.incorrect {
            border-color: var(--danger);
            background: rgba(244, 67, 54, 0.1);
        }

        /* Portfolio Section */
        .portfolio-section {
            background: linear-gradient(135deg, #fafafa, #f0f0f0);
            border: 2px solid var(--primary-light);
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
        }

        .portfolio-title {
            font-size: 1.3rem;
            color: var(--primary-dark);
            margin-bottom: 1rem;
            text-align: center;
        }

        .portfolio-requirements {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin: 1.5rem 0;
        }

        .requirement-item {
            background: white;
            padding: 1rem;
            border-radius: 8px;
            border-left: 4px solid var(--primary-dark);
        }

        .requirement-number {
            font-weight: bold;
            color: var(--primary-dark);
            margin-bottom: 0.5rem;
        }

        /* Navigation Buttons */
        .lesson-navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 2rem 0;
            border-top: 2px solid var(--gray-light);
            margin-top: 3rem;
        }

        .nav-button {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.8rem 1.5rem;
            background: var(--primary-dark);
            color: white;
            text-decoration: none;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            transition: all 0.3s;
        }

        .nav-button:hover {
            background: var(--primary-light);
            transform: translateY(-2px);
        }

        .nav-button:disabled {
            background: var(--gray-medium);
            cursor: not-allowed;
            opacity: 0.5;
            transform: none;
        }

        .complete-button {
            padding: 1rem 2rem;
            background: var(--success);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .complete-button:hover {
            background: #45a049;
            transform: translateY(-2px);
        }

        /* Progress Bar */
        .module-progress-bar {
            height: 30px;
            background: var(--gray-light);
            border-radius: 15px;
            overflow: hidden;
            margin-bottom: 2rem;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-dark), var(--primary-light));
            border-radius: 15px;
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 1rem;
            color: white;
            font-weight: bold;
        }

        /* Notification */
        .notification {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            background: var(--success);
            color: white;
            padding: 1rem 2rem;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            z-index: 1000;
            transform: translateX(400px);
            transition: transform 0.3s ease;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.error {
            background: var(--danger);
        }

        .notification.info {
            background: var(--info);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container {
                grid-template-columns: 1fr;
            }

            .sidebar {
                position: static;
            }

            .lesson-title {
                font-size: 1.5rem;
            }

            .image-gallery {
                grid-template-columns: 1fr;
            }

            .portfolio-requirements {
                grid-template-columns: 1fr;
            }
        }

        /* Animations */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in {
            animation: fadeIn 0.5s ease;
        }

        @keyframes slideIn {
            from {
                transform: translateX(400px);
            }
            to {
                transform: translateX(0);
            }
        }
    </style>
</head>
<body>
    <!-- Sistema de autenticaci√≥n integrado -->
    <script>
        // ========================
        // SISTEMA DE AUTENTICACI√ìN INTEGRADO
        // ========================

        const USER_CONFIG = {
            instructorEmails: [
                'joselyn.vizcarra@uah.cl',
                'jvizcarra@uah.cl',
                'j.vizcarra@uah.cl'
            ],
            authorizedStudents: [
                'test.estudiante1@gmail.com',
                'test.estudiante2@gmail.com',
                'test.estudiante3@gmail.com'
            ],
            evaluatorEmails: [
                'evaluador1@uchile.cl',
                'comite@uchile.cl'
            ]
        };

        function determineUserRole(email) {
            if (USER_CONFIG.instructorEmails.includes(email)) {
                return 'instructor';
            } else if (USER_CONFIG.authorizedStudents.includes(email)) {
                return 'estudiante';
            } else if (USER_CONFIG.evaluatorEmails.includes(email)) {
                return 'evaluador';
            } else {
                return 'visitante';
            }
        }

        function isAuthenticated() {
            return localStorage.getItem('isAuthenticated') === 'true';
        }

        function getCurrentUser() {
            if (!isAuthenticated()) return null;
            try {
                return JSON.parse(localStorage.getItem('currentUser') || 'null');
            } catch (error) {
                console.error('Error parsing user data:', error);
                logout();
                return null;
            }
        }

        function protectPage(requiredRole = null) {
            const currentUser = getCurrentUser();
            
            if (!isAuthenticated() || !currentUser) {
                window.location.href = 'login.html';
                return false;
            }

            if (requiredRole && currentUser.role !== requiredRole) {
                switch(currentUser.role) {
                    case 'instructor':
                        if (window.location.pathname.includes('dashboard.html')) {
                            return true;
                        }
                        window.location.href = 'dashboard.html';
                        break;
                    case 'estudiante':
                    case 'visitante':
                    case 'evaluador':
                    default:
                        if (window.location.pathname.includes('index.html') || window.location.pathname === '/' || window.location.pathname.includes('dibujo-anatomico-lms')) {
                            return true;
                        }
                        window.location.href = 'index.html';
                        break;
                }
                return false;
            }

            return true;
        }

        function getStudentProgress(email = null) {
            const userEmail = email || getCurrentUser()?.email;
            if (!userEmail) return null;
            
            const progressKey = `progress_${userEmail}`;
            try {
                return JSON.parse(localStorage.getItem(progressKey) || 'null');
            } catch (error) {
                console.error('Error parsing progress data:', error);
                return null;
            }
        }

        function logUserActivity(action, userData, details = {}) {
            try {
                const activities = JSON.parse(localStorage.getItem('userActivities') || '[]');
                
                const activity = {
                    timestamp: new Date().toISOString(),
                    sessionId: userData.sessionId || generateSessionId(),
                    action: action,
                    userEmail: userData.email,
                    userName: userData.name,
                    userRole: userData.role,
                    details: details,
                    userAgent: navigator.userAgent,
                    url: window.location.href
                };

                activities.push(activity);
                
                if (activities.length > 1000) {
                    activities.splice(0, activities.length - 1000);
                }
                
                localStorage.setItem('userActivities', JSON.stringify(activities));
            } catch (error) {
                console.error('Error logging activity:', error);
            }
        }

        function generateSessionId() {
            return 'session_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
        }

        function logout() {
            const currentUser = getCurrentUser();
            if (currentUser) {
                logUserActivity('logout', currentUser);
            }

            localStorage.removeItem('currentUser');
            localStorage.removeItem('isAuthenticated');
            localStorage.removeItem('sessionStart');

            window.location.href = 'login.html';
        }

        // Funci√≥n para crear usuario demo si no hay autenticaci√≥n
        function createDemoUser() {
            const demoUser = {
                email: 'demo.estudiante@uah.cl',
                name: 'Estudiante Demo',
                role: 'estudiante',
                loginTime: new Date().toISOString(),
                sessionId: generateSessionId(),
                picture: null
            };
            
            localStorage.setItem('currentUser', JSON.stringify(demoUser));
            localStorage.setItem('isAuthenticated', 'true');
            localStorage.setItem('sessionStart', demoUser.loginTime);
            
            // Inicializar progreso demo
            const progressKey = `progress_${demoUser.email}`;
            if (!localStorage.getItem(progressKey)) {
                const initialProgress = {
                    modules: {
                        1: { completed: true, progress: 100, timeSpent: 120, completedLessons: [1,2,3,4,5,6] },
                        2: { completed: true, progress: 100, timeSpent: 95, completedLessons: [1,2,3,4,5,6] },
                        3: { completed: true, progress: 100, timeSpent: 110, completedLessons: [1,2,3,4,5,6] },
                        4: { completed: false, progress: 0, timeSpent: 0, completedLessons: [] }
                    },
                    overallProgress: 75,
                    totalTimeSpent: 325,
                    lastActivity: new Date().toISOString()
                };
                localStorage.setItem(progressKey, JSON.stringify(initialProgress));
            }
            
            return demoUser;
        }
    </script>

    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <a href="index.html" class="back-btn">
                <span>‚Üê</span>
                <span>Volver al Curso</span>
            </a>
            
            <h1 class="module-title">M√≥dulo 4: Figura Completa</h1>
            
            <div class="module-progress">
                <span class="progress-text" id="progressText">0% Completado</span>
            </div>
        </div>
    </header>

    <!-- Main Container -->
    <div class="container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <h3 style="margin-bottom: 1.5rem;">Lecciones</h3>
            <ul class="lesson-list">
                <li class="lesson-item">
                    <a class="lesson-link active" onclick="loadLesson(1)">
                        <span class="lesson-number">1</span>
                        <span>Integraci√≥n Completa</span>
                    </a>
                </li>
                <li class="lesson-item">
                    <a class="lesson-link" onclick="loadLesson(2)">
                        <span class="lesson-number">2</span>
                        <span>Poses Din√°micas</span>
                    </a>
                </li>
                <li class="lesson-item">
                    <a class="lesson-link" onclick="loadLesson(3)">
                        <span class="lesson-number">3</span>
                        <span>Composici√≥n Avanzada</span>
                    </a>
                </li>
                <li class="lesson-item">
                    <a class="lesson-link" onclick="loadLesson(4)">
                        <span class="lesson-number">4</span>
                        <span>Narrativa Visual</span>
                    </a>
                </li>
                <li class="lesson-item">
                    <a class="lesson-link" onclick="loadLesson(5)">
                        <span class="lesson-number">5</span>
                        <span>Desarrollo Personal</span>
                    </a>
                </li>
                <li class="lesson-item">
                    <a class="lesson-link" onclick="loadLesson(6)">
                        <span class="lesson-number">6</span>
                        <span>Portfolio Final</span>
                    </a>
                </li>
            </ul>
        </aside>

        <!-- Main Content -->
        <main class="content fade-in" id="mainContent">
            <div class="module-progress-bar">
                <div class="progress-fill" id="moduleProgress" style="width: 0%">
                    <span>0%</span>
                </div>
            </div>

            <div class="content-header">
                <h2 class="lesson-title">Lecci√≥n 1: Integraci√≥n de Conocimientos Previos</h2>
                <div class="lesson-meta">
                    <span>‚è±Ô∏è 45 minutos</span>
                    <span>üìö S√≠ntesis</span>
                    <span>üéØ Nivel: Avanzado</span>
                </div>
            </div>

            <div class="lesson-content" id="lessonContent">
                <p>
                    En este m√≥dulo final integramos todos los conocimientos adquiridos en los m√≥dulos anteriores 
                    para crear representaciones completas y expresivas del cuerpo humano. Este es el momento 
                    de sintetizar proporciones, anatom√≠a facial, torso y extremidades en figuras coherentes y din√°micas.
                </p>

                <div class="integration-box">
                    <strong>Conexi√≥n de M√≥dulos:</strong> Utilizar√°s el canon de 8 cabezas (M√≥dulo 1), 
                    proporciones faciales (M√≥dulo 2), y biomec√°nica del torso (M√≥dulo 3) para crear 
                    figuras completas con narrativa visual personal.
                </div>

                <h2>Revisi√≥n de Fundamentos Clave</h2>
                <p>Antes de avanzar a composiciones complejas, repasemos los elementos fundamentales que integraremos:</p>
                
                <h3>Del M√≥dulo 1: Canon de 8 Cabezas</h3>
                <ul>
                    <li><strong>Proporciones verticales:</strong> Las 8 divisiones fundamentales del cuerpo</li>
                    <li><strong>Anchuras clave:</strong> Hombros, caderas, cuello y extremidades</li>
                    <li><strong>Puntos de referencia:</strong> Alineaciones y medidas cr√≠ticas</li>
                </ul>

                <h3>Del M√≥dulo 2: Anatom√≠a Facial</h3>
                <ul>
                    <li><strong>Proporciones faciales:</strong> Divisi√≥n en tercios y quintos</li>
                    <li><strong>Expresi√≥n:</strong> M√∫sculos faciales y estados emocionales</li>
                    <li><strong>√Ångulos y perspectiva:</strong> Rostro en diferentes posiciones</li>
                </ul>

                <h3>Del M√≥dulo 3: Torso y Extremidades</h3>
                <ul>
                    <li><strong>Biomec√°nica:</strong> Articulaciones y rangos de movimiento</li>
                    <li><strong>Masa muscular:</strong> Volumen y definici√≥n anat√≥mica</li>
                    <li><strong>Equilibrio y peso:</strong> Centro de gravedad y estabilidad</li>
                </ul>

                <div class="tip-box">
                    <strong>Enfoque Integrador:</strong> No pienses en estos elementos por separado. 
                    Una figura exitosa requiere que proporciones, expresi√≥n, y biomec√°nica funcionen 
                    como un sistema unificado que comunique la intenci√≥n art√≠stica.
                </div>

                <h2>Metodolog√≠a de Integraci√≥n</h2>
                <p>Para lograr figuras completas exitosas, seguiremos un proceso sistem√°tico de cinco fases:</p>

                <ol>
                    <li><strong>Estructura base:</strong> Aplicar canon de 8 cabezas como fundamento</li>
                    <li><strong>Definici√≥n anat√≥mica:</strong> Incorporar biomec√°nica y vol√∫menes</li>
                    <li><strong>Expresi√≥n facial:</strong> Conectar rostro con intenci√≥n de la pose</li>
                    <li><strong>Refinamiento t√©cnico:</strong> Ajustar proporciones y coherencia</li>
                    <li><strong>Narrativa visual:</strong> Agregar elementos que comuniquen la historia</li>
                </ol>

                <div class="exercise-box">
                    <div class="exercise-title">üé® Ejercicio 1: Diagn√≥stico de Integraci√≥n</div>
                    <p>
                        <strong>Objetivo:</strong> Evaluar tu capacidad actual de integrar conocimientos previos.
                    </p>
                    <p>
                        <strong>Instrucciones:</strong>
                    </p>
                    <ol>
                        <li>Dibuja una figura completa en pose de pie (20 minutos)</li>
                        <li>Incluye expresi√≥n facial espec√≠fica que conecte con la pose</li>
                        <li>Aplica proporciones del canon de 8 cabezas</li>
                        <li>Demuestra comprensi√≥n biomec√°nica en extremidades</li>
                        <li>Autoeval√∫a usando la checklist proporcionada</li>
                    </ol>
                    <p>
                        <strong>Evaluaci√≥n:</strong> Este ejercicio servir√° como l√≠nea base para medir 
                        tu progreso al final del m√≥dulo.
                    </p>
                </div>

                <h2>Checklist de Autoevaluaci√≥n</h2>
                <div class="quiz-container">
                    <div class="quiz-question">Verifica que tu dibujo incluya estos elementos fundamentales:</div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-top: 1rem;">
                        <div style="background: white; padding: 1rem; border-radius: 8px;">
                            <h4 style="color: var(--primary-dark); margin-bottom: 0.5rem;">Estructura (M√≥dulo 1)</h4>
                            <ul style="list-style: none; margin: 0;">
                                <li>‚òê Canon de 8 cabezas aplicado</li>
                                <li>‚òê Proporciones horizontales correctas</li>
                                <li>‚òê Puntos de referencia alineados</li>
                            </ul>
                        </div>
                        <div style="background: white; padding: 1rem; border-radius: 8px;">
                            <h4 style="color: var(--primary-dark); margin-bottom: 0.5rem;">Expresi√≥n (M√≥dulo 2)</h4>
                            <ul style="list-style: none; margin: 0;">
                                <li>‚òê Proporciones faciales precisas</li>
                                <li>‚òê Expresi√≥n coherente con pose</li>
                                <li>‚òê √Ångulo del rostro apropiado</li>
                            </ul>
                        </div>
                        <div style="background: white; padding: 1rem; border-radius: 8px;">
                            <h4 style="color: var(--primary-dark); margin-bottom: 0.5rem;">Biomec√°nica (M√≥dulo 3)</h4>
                            <ul style="list-style: none; margin: 0;">
                                <li>‚òê Articulaciones anat√≥micamente correctas</li>
                                <li>‚òê Equilibrio y centro de gravedad</li>
                                <li>‚òê Masa muscular proporcionada</li>
                            </ul>
                        </div>
                        <div style="background: white; padding: 1rem; border-radius: 8px;">
                            <h4 style="color: var(--primary-dark); margin-bottom: 0.5rem;">Integraci√≥n (M√≥dulo 4)</h4>
                            <ul style="list-style: none; margin: 0;">
                                <li>‚òê Coherencia visual global</li>
                                <li>‚òê Intenci√≥n art√≠stica clara</li>
                                <li>‚òê Elementos narrativos presentes</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <h2>Video Tutorial</h2>
                <div class="video-container">
                    <div class="video-placeholder">
                        <div class="play-button" onclick="playVideo()">‚ñ∂</div>
                        <p>Video: Integraci√≥n de Conocimientos - De la Estructura a la Expresi√≥n</p>
                        <small>Duraci√≥n: 15:30</small>
                    </div>
                </div>

                <h2>Galer√≠a de Referencia</h2>
                <div class="image-gallery">
                    <div class="gallery-item">
                        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 400 600'%3E%3Crect fill='%23f5f5f5' width='400' height='600'/%3E%3Ctext x='50%25' y='50%25' text-anchor='middle' font-size='16' fill='%23666'%3EFigura Completa%0AEstructura Base%3C/text%3E%3C/svg%3E" alt="Estructura Base">
                        <div class="gallery-caption">Estructura Base - Canon Aplicado</div>
                    </div>
                    <div class="gallery-item">
                        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 400 600'%3E%3Crect fill='%23f5f5f5' width='400' height='600'/%3E%3Ctext x='50%25' y='50%25' text-anchor='middle' font-size='16' fill='%23666'%3EFigura Completa%0ADefinici√≥n Anat√≥mica%3C/text%3E%3C/svg%3E" alt="Definici√≥n Anat√≥mica">
                        <div class="gallery-caption">Definici√≥n Anat√≥mica Integrada</div>
                    </div>
                    <div class="gallery-item">
                        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 400 600'%3E%3Crect fill='%23f5f5f5' width='400' height='600'/%3E%3Ctext x='50%25' y='50%25' text-anchor='middle' font-size='16' fill='%23666'%3EFigura Completa%0ANarrativa Visual%3C/text%3E%3C/svg%3E" alt="Narrativa Visual">
                        <div class="gallery-caption">Narrativa Visual Completa</div>
                    </div>
                </div>

                <div class="integration-box">
                    <strong>Reflexi√≥n Clave:</strong> El objetivo de este m√≥dulo no es solo dibujar figuras 
                    t√©cnicamente correctas, sino crear representaciones que comuniquen historias, emociones 
                    y estados. La t√©cnica debe servir a la expresi√≥n, no dominarla.
                </div>

                <h2>Autoevaluaci√≥n Diagn√≥stica</h2>
                <div class="quiz-container">
                    <div class="quiz-question">
                        ¬øCu√°l es el principal desaf√≠o al integrar conocimientos de m√≥dulos anteriores?
                    </div>
                    <div class="quiz-options">
                        <div class="quiz-option" onclick="selectAnswer(this, false)">Memorizar todas las proporciones exactas</div>
                        <div class="quiz-option" onclick="selectAnswer(this, false)">Dibujar detalles anat√≥micos perfectos</div>
                        <div class="quiz-option" onclick="selectAnswer(this, true)">Mantener coherencia visual mientras se incorporan m√∫ltiples elementos</div>
                        <div class="quiz-option" onclick="selectAnswer(this, false)">Completar el dibujo en el menor tiempo posible</div>
                    </div>
                </div>
            </div>

            <!-- Navigation -->
            <div class="lesson-navigation">
                <button class="nav-button" disabled id="prevButton">
                    <span>‚Üê</span>
                    <span>Lecci√≥n Anterior</span>
                </button>

                <button class="complete-button" onclick="completeLesson()" id="completeButton">
                    Marcar como Completada
                </button>

                <button class="nav-button" onclick="loadLesson(2)" id="nextButton">
                    <span>Siguiente Lecci√≥n</span>
                    <span>‚Üí</span>
                </button>
            </div>
        </main>
    </div>

    <!-- Notification -->
    <div class="notification" id="notification"></div>

    <!-- Scripts -->
    <script>
        // Variables globales
        let currentUser = null;
        let currentLesson = 1;
        let moduleProgress = 0;
        let completedLessons = [];
        let lessonData = {};

        // Contenido de las lecciones
        const lessonsContent = {
            1: {
                title: 'Integraci√≥n de Conocimientos Previos',
                meta: '‚è±Ô∏è 45 minutos | üìö S√≠ntesis | üéØ Nivel: Avanzado',
                content: `
                    <p>En este m√≥dulo final integramos todos los conocimientos adquiridos en los m√≥dulos anteriores para crear representaciones completas y expresivas del cuerpo humano. Este es el momento de sintetizar proporciones, anatom√≠a facial, torso y extremidades en figuras coherentes y din√°micas.</p>
                    
                    <div class="integration-box"><strong>Conexi√≥n de M√≥dulos:</strong> Utilizar√°s el canon de 8 cabezas (M√≥dulo 1), proporciones faciales (M√≥dulo 2), y biomec√°nica del torso (M√≥dulo 3) para crear figuras completas con narrativa visual personal.</div>
                    
                    <h2>Revisi√≥n de Fundamentos Clave</h2>
                    <p>Antes de avanzar a composiciones complejas, repasemos los elementos fundamentales que integraremos:</p>
                    
                    <h3>Del M√≥dulo 1: Canon de 8 Cabezas</h3>
                    <ul>
                        <li><strong>Proporciones verticales:</strong> Las 8 divisiones fundamentales del cuerpo</li>
                        <li><strong>Anchuras clave:</strong> Hombros, caderas, cuello y extremidades</li>
                        <li><strong>Puntos de referencia:</strong> Alineaciones y medidas cr√≠ticas</li>
                    </ul>
                    
                    <div class="exercise-box">
                        <div class="exercise-title">üé® Ejercicio 1: Diagn√≥stico de Integraci√≥n</div>
                        <p><strong>Objetivo:</strong> Evaluar tu capacidad actual de integrar conocimientos previos.</p>
                        <ol>
                            <li>Dibuja una figura completa en pose de pie (20 minutos)</li>
                            <li>Incluye expresi√≥n facial espec√≠fica que conecte con la pose</li>
                            <li>Aplica proporciones del canon de 8 cabezas</li>
                            <li>Demuestra comprensi√≥n biomec√°nica en extremidades</li>
                        </ol>
                    </div>
                `
            },
            2: {
                title: 'Poses Din√°micas y Movimiento',
                meta: '‚è±Ô∏è 50 minutos | üìö Movimiento | üéØ Nivel: Avanzado',
                content: `
                    <h2>Fundamentos del Movimiento en la Figura Humana</h2>
                    <p>Las poses din√°micas trascienden la anatom√≠a est√°tica para capturar la esencia del movimiento y la energ√≠a. En esta lecci√≥n aprender√°s a crear figuras que comuniquen acci√≥n, ritmo y vitalidad.</p>
                    
                    <h2>Principios del Dinamismo</h2>
                    <h3>1. L√≠nea de Acci√≥n</h3>
                    <p>La l√≠nea de acci√≥n es una curva imaginaria que atraviesa toda la figura, creando unidad y direcci√≥n en el movimiento.</p>
                    <ul>
                        <li><strong>Curva principal:</strong> Define la columna vertebral en movimiento</li>
                        <li><strong>Ritmo secundario:</strong> Brazos y piernas siguen o contrastan la l√≠nea principal</li>
                        <li><strong>Contrapposto:</strong> Equilibrio entre tensi√≥n y relajaci√≥n</li>
                    </ul>
                    
                    <h3>2. Centro de Gravedad</h3>
                    <p>Fundamental para poses cre√≠bles:</p>
                    <ul>
                        <li>En reposo: Centro sobre base de sustentaci√≥n</li>
                        <li>En movimiento: Desplazamiento anticipado del centro</li>
                        <li>En acci√≥n: Centro proyectado hacia la direcci√≥n del movimiento</li>
                    </ul>
                    
                    <div class="tip-box"><strong>Clave del Movimiento:</strong> Una pose din√°mica debe sugerir el momento anterior y el siguiente. El espectador debe "sentir" hacia d√≥nde se dirige la acci√≥n.</div>
                    
                    <h2>Tipos de Poses Din√°micas</h2>
                    <h3>Caminata y Marcha</h3>
                    <ul>
                        <li>Transferencia de peso de pie de apoyo a pie de avance</li>
                        <li>Rotaci√≥n de pelvis y hombros en direcciones opuestas</li>
                        <li>Brazos en movimiento pendular natural</li>
                    </ul>
                    
                    <h3>Salto y Elevaci√≥n</h3>
                    <ul>
                        <li>Compresi√≥n previa al impulso</li>
                        <li>Extensi√≥n m√°xima en el aire</li>
                        <li>Anticipaci√≥n del aterrizaje</li>
                    </ul>
                    
                    <div class="exercise-box">
                        <div class="exercise-title">üé® Ejercicio 2: Secuencia de Movimiento</div>
                        <p>Dibuja una secuencia de 3 poses que muestren:</p>
                        <ol>
                            <li><strong>Preparaci√≥n:</strong> Figura prepar√°ndose para la acci√≥n</li>
                            <li><strong>Acci√≥n:</strong> Momento de m√°xima energ√≠a</li>
                            <li><strong>Resoluci√≥n:</strong> Finalizaci√≥n del movimiento</li>
                        </ol>
                        <p>Tiempo: 45 minutos (15 min por pose)</p>
                    </div>
                `
            },
            3: {
                title: 'Composici√≥n Avanzada y Espacio',
                meta: '‚è±Ô∏è 55 minutos | üìö Composici√≥n | üéØ Nivel: Avanzado',
                content: `
                    <h2>Composici√≥n como Lenguaje Visual</h2>
                    <p>La composici√≥n determina c√≥mo el espectador lee e interpreta tu obra. Una composici√≥n exitosa gu√≠a la mirada, comunica jerarqu√≠as visuales y refuerza el mensaje art√≠stico.</p>
                    
                    <h2>Elementos Compositivos Fundamentales</h2>
                    <h3>1. Encuadre y Formato</h3>
                    <ul>
                        <li><strong>Vertical:</strong> Enfatiza altura, elegancia, espiritualidad</li>
                        <li><strong>Horizontal:</strong> Sugiere estabilidad, calma, amplitud</li>
                        <li><strong>Cuadrado:</strong> Equilibrio, formalidad, contenci√≥n</li>
                        <li><strong>Panor√°mico:</strong> Movimiento, narrativa temporal</li>
                    </ul>
                    
                    <h3>2. Regla de Tercios y Puntos √Åureos</h3>
                    <p>Divide el formato en nueve secciones iguales:</p>
                    <ul>
                        <li>Coloca elementos importantes en intersecciones</li>
                        <li>Usa l√≠neas de tercio para horizontes y verticales</li>
                        <li>Evita centrar sim√©tricamente salvo por intenci√≥n espec√≠fica</li>
                    </ul>
                    
                    <h3>3. Peso Visual y Balance</h3>
                    <ul>
                        <li><strong>Sim√©trico:</strong> Equilibrio formal, est√°tico</li>
                        <li><strong>Asim√©trico:</strong> Equilibrio din√°mico, tensi√≥n controlada</li>
                        <li><strong>Radial:</strong> Desde centro hacia afuera</li>
                    </ul>
                    
                    <div class="tip-box"><strong>Composici√≥n Efectiva:</strong> Una buena composici√≥n es invisible - sirve al contenido sin llamar la atenci√≥n sobre s√≠ misma. El espectador debe experimentar la imagen, no analizar su estructura.</div>
                    
                    <h2>T√©cnicas de Composici√≥n Avanzada</h2>
                    <h3>Triangulaci√≥n</h3>
                    <p>Organiza elementos importantes en tri√°ngulos impl√≠citos:</p>
                    <ul>
                        <li>Crea estabilidad visual</li>
                        <li>Genera recorridos de lectura</li>
                        <li>Permite jerarqu√≠as claras</li>
                    </ul>
                    
                    <h3>Ritmo y Repetici√≥n</h3>
                    <ul>
                        <li><strong>Repetici√≥n:</strong> Elementos similares que crean unidad</li>
                        <li><strong>Variaci√≥n:</strong> Cambios que mantienen inter√©s</li>
                        <li><strong>Progresi√≥n:</strong> Cambio gradual que genera movimiento</li>
                    </ul>
                    
                    <h3>Contraste y √ânfasis</h3>
                    <ul>
                        <li>Contraste de tama√±o: Grande vs peque√±o</li>
                        <li>Contraste tonal: Claro vs oscuro</li>
                        <li>Contraste direccional: Vertical vs horizontal</li>
                        <li>Contraste conceptual: Opuesto vs similar</li>
                    </ul>
                    
                    <div class="exercise-box">
                        <div class="exercise-title">üé® Ejercicio 3: An√°lisis Compositivo</div>
                        <p>Analiza 3 obras maestras del arte figurativo:</p>
                        <ol>
                            <li>Identifica la estructura compositiva b√°sica</li>
                            <li>Marca el recorrido visual principal</li>
                            <li>Se√±ala contrastes y √©nfasis</li>
                            <li>Explica c√≥mo la composici√≥n refuerza el contenido</li>
                        </ol>
                        <p>Despu√©s, aplica uno de estos esquemas compositivos a tu propia figura.</p>
                    </div>
                `
            },
            4: {
                title: 'Narrativa Visual y Expresi√≥n',
                meta: '‚è±Ô∏è 60 minutos | üìö Narrativa | üéØ Nivel: Avanzado',
                content: `
                    <h2>Del Dibujo a la Historia</h2>
                    <p>La narrativa visual transforma el dibujo t√©cnico en comunicaci√≥n emocional. Cada elemento - pose, expresi√≥n, contexto - contribuye a una historia que el espectador completa con su interpretaci√≥n.</p>
                    
                    <h2>Elementos de la Narrativa Visual</h2>
                    <h3>1. Gestualidad Corporal</h3>
                    <p>El cuerpo comunica antes que el rostro:</p>
                    <ul>
                        <li><strong>Postura abierta:</strong> Confianza, disponibilidad, expansi√≥n</li>
                        <li><strong>Postura cerrada:</strong> Protecci√≥n, introspecci√≥n, tensi√≥n</li>
                        <li><strong>Orientaci√≥n:</strong> Hacia d√≥nde se dirige la atenci√≥n</li>
                        <li><strong>Nivel de activaci√≥n:</strong> Relajaci√≥n vs tensi√≥n muscular</li>
                    </ul>
                    
                    <h3>2. Expresi√≥n Facial Integrada</h3>
                    <p>La expresi√≥n debe ser coherente con la gestualidad corporal:</p>
                    <ul>
                        <li>Micro-expresiones: Emociones sutiles</li>
                        <li>Direcci√≥n de la mirada: Qu√© observa el personaje</li>
                        <li>Tensi√≥n muscular facial: Concentraci√≥n, preocupaci√≥n, alegr√≠a</li>
                    </ul>
                    
                    <h3>3. Contexto Impl√≠cito</h3>
                    <ul>
                        <li><strong>Vestuario:</strong> √âpoca, clase social, actividad</li>
                        <li><strong>Objetos:</strong> Herramientas, accesorios que sugieren acci√≥n</li>
                        <li><strong>Entorno sugerido:</strong> Indoor/outdoor, formal/informal</li>
                    </ul>
                    
                    <div class="tip-box"><strong>Narrativa Efectiva:</strong> Las mejores historias visuales plantean preguntas sin responder completamente. Permiten al espectador imaginar el "antes" y "despu√©s" del momento representado.</div>
                    
                    <h2>Estrategias Narrativas</h2>
                    <h3>Momento Decisivo</h3>
                    <p>Captura el instante m√°s expresivo de una acci√≥n:</p>
                    <ul>
                        <li>Justo antes del impacto</li>
                        <li>En el momento de reconocimiento</li>
                        <li>Durante la transici√≥n emocional</li>
                    </ul>
                    
                    <h3>Contradicci√≥n Visual</h3>
                    <p>Tensi√≥n entre elementos aparentemente opuestos:</p>
                    <ul>
                        <li>Postura confiada con expresi√≥n dubitativa</li>
                        <li>Elegancia formal en situaci√≥n informal</li>
                        <li>Juventud con gestualidad madura</li>
                    </ul>
                    
                    <h3>Simbolismo Corporal</h3>
                    <ul>
                        <li><strong>Manos:</strong> Acci√≥n, creaci√≥n, conexi√≥n</li>
                        <li><strong>Brazos:</strong> Abrazar, rechazar, proteger</li>
                        <li><strong>Piernas:</strong> Estabilidad, movimiento, huida</li>
                        <li><strong>Columna:</strong> Fuerza interior, determinaci√≥n</li>
                    </ul>
                    
                    <div class="exercise-box">
                        <div class="exercise-title">üé® Ejercicio 4: Desarrollo Narrativo</div>
                        <p>Crea una figura que cuente una historia espec√≠fica:</p>
                        <ol>
                            <li><strong>Elige un tema:</strong> "Esperando noticias importantes"</li>
                            <li><strong>Define el momento:</strong> ¬øQu√© instante exacto captures?</li>
                            <li><strong>Integra elementos:</strong> Postura + expresi√≥n + contexto</li>
                            <li><strong>Refina la narrativa:</strong> ¬øQu√© historia cuenta sin palabras?</li>
                        </ol>
                        <p>Tiempo: 50 minutos</p>
                    </div>
                    
                    <h2>Emociones Universales en el Cuerpo</h2>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin: 1.5rem 0;">
                        <div style="background: white; padding: 1rem; border-radius: 8px; border-left: 4px solid var(--primary-dark);">
                            <h4 style="color: var(--primary-dark);">Alegr√≠a</h4>
                            <ul style="font-size: 0.9rem;">
                                <li>Postura expansiva</li>
                                <li>Hombros elevados</li>
                                <li>Movimiento hacia arriba</li>
                            </ul>
                        </div>
                        <div style="background: white; padding: 1rem; border-radius: 8px; border-left: 4px solid var(--warning);">
                            <h4 style="color: var(--warning);">Tristeza</h4>
                            <ul style="font-size: 0.9rem;">
                                <li>Postura contra√≠da</li>
                                <li>Hombros ca√≠dos</li>
                                <li>Movimiento hacia abajo</li>
                            </ul>
                        </div>
                        <div style="background: white; padding: 1rem; border-radius: 8px; border-left: 4px solid var(--danger);">
                            <h4 style="color: var(--danger);">Ira</h4>
                            <ul style="font-size: 0.9rem;">
                                <li>Tensi√≥n muscular</li>
                                <li>Postura agresiva</li>
                                <li>Movimiento hacia adelante</li>
                            </ul>
                        </div>
                        <div style="background: white; padding: 1rem; border-radius: 8px; border-left: 4px solid var(--info);">
                            <h4 style="color: var(--info);">Miedo</h4>
                            <ul style="font-size: 0.9rem;">
                                <li>Postura protectiva</li>
                                <li>Contracci√≥n</li>
                                <li>Movimiento de retroceso</li>
                            </ul>
                        </div>
                    </div>
                `
            },
            5: {
                title: 'Desarrollo de Estilo Personal',
                meta: '‚è±Ô∏è 65 minutos | üìö Estilo | üéØ Nivel: Avanzado',
                content: `
                    <h2>De la T√©cnica al Estilo Personal</h2>
                    <p>El estilo personal no es una decoraci√≥n agregada a la t√©cnica, sino la manera √∫nica en que cada artista interpreta y comunica la realidad. Es la s√≠ntesis entre habilidad t√©cnica, visi√≥n personal y experiencia de vida.</p>
                    
                    <h2>Componentes del Estilo Personal</h2>
                    <h3>1. Enfoque T√©cnico</h3>
                    <ul>
                        <li><strong>L√≠nea:</strong> Precisa vs gestual, continua vs fragmentada</li>
                        <li><strong>Proporci√≥n:</strong> Realista vs estilizada, can√≥nica vs expresiva</li>
                        <li><strong>Detalle:</strong> Hiperrealista vs sint√©tico, acabado vs sugerido</li>
                        <li><strong>Volumen:</strong> Modelado vs plano, sutil vs dram√°tico</li>
                    </ul>
                    
                    <h3>2. Preferencias Compositivas</h3>
                    <ul>
                        <li>Encuadres predilectos</li>
                        <li>Distribuci√≥n del espacio</li>
                        <li>Ritmos visuales recurrentes</li>
                        <li>Manejo de contrastes</li>
                    </ul>
                    
                    <h3>3. Tem√°tica y Contenido</h3>
                    <ul>
                        <li>Qu√© aspectos de la figura humana te interesan m√°s</li>
                        <li>Qu√© emociones o ideas quieres comunicar</li>
                        <li>Qu√© narrativas prefieres explorar</li>
                    </ul>
                    
                    <div class="tip-box"><strong>Desarrollo Aut√©ntico:</strong> El estilo personal aut√©ntico emerge naturalmente de la pr√°ctica constante y la reflexi√≥n honesta sobre tus intereses y fortalezas. No se puede forzar ni imitar exitosamente.</div>
                    
                    <h2>Proceso de Autodescubrimiento</h2>
                    <h3>1. An√°lisis de Tu Obra Actual</h3>
                    <p>Revisa tus dibujos anteriores buscando patrones:</p>
                    <ul>
                        <li>¬øQu√© elementos repites involuntariamente?</li>
                        <li>¬øHacia qu√© tipo de poses te sientes atra√≠do?</li>
                        <li>¬øQu√© aspectos t√©cnicos dominas mejor?</li>
                        <li>¬øQu√© emociones comunicas m√°s efectivamente?</li>
                    </ul>
                    
                    <h3>2. Influencias Conscientes</h3>
                    <p>Identifica artistas que admiras:</p>
                    <ul>
                        <li>¬øQu√© elementos espec√≠ficos te atraen de su obra?</li>
                        <li>¬øC√≥mo puedes incorporar esos elementos a tu manera?</li>
                        <li>¬øQu√© aspectos rechazas o no te interesan?</li>
                    </ul>
                    
                    <h3>3. Experimentaci√≥n Dirigida</h3>
                    <ul>
                        <li>Prueba diferentes aproximaciones t√©cnicas</li>
                        <li>Explora temas que te generen curiosidad personal</li>
                        <li>Combina elementos de diferentes influencias</li>
                        <li>Documenta qu√© experimentos te satisfacen m√°s</li>
                    </ul>
                    
                    <div class="exercise-box">
                        <div class="exercise-title">üé® Ejercicio 5: Autorretrato Estil√≠stico</div>
                        <p>Crea tres versiones del mismo autorretrato usando diferentes aproximaciones:</p>
                        <ol>
                            <li><strong>Versi√≥n Realista:</strong> M√°xima fidelidad anat√≥mica</li>
                            <li><strong>Versi√≥n Interpretativa:</strong> Enfatiza aspectos que consideras importantes</li>
                            <li><strong>Versi√≥n Expresiva:</strong> Prioriza comunicar un estado emocional</li>
                        </ol>
                        <p>Analiza cu√°l se siente m√°s "tuyo" y por qu√©.</p>
                    </div>
                    
                    <h2>Estilo vs Manierismo</h2>
                    <h3>Estilo Aut√©ntico:</h3>
                    <ul>
                        <li>Surge org√°nicamente de la pr√°ctica</li>
                        <li>Sirve al contenido que quieres comunicar</li>
                        <li>Evoluciona naturalmente con el tiempo</li>
                        <li>Se siente c√≥modo y natural</li>
                    </ul>
                    
                    <h3>Manierismo Forzado:</h3>
                    <ul>
                        <li>Se impone artificialmente</li>
                        <li>Llama la atenci√≥n sobre s√≠ mismo</li>
                        <li>Se mantiene r√≠gido por inseguridad</li>
                        <li>Copia elementos superficiales de otros</li>
                    </ul>
                    
                    <div class="integration-box"><strong>Equilibrio Fundamental:</strong> Un estilo maduro mantiene suficiente flexibilidad para servir a diferentes necesidades expresivas, pero suficiente coherencia para ser reconocible como propio.</div>
                    
                    <h2>Construcci√≥n de Portfolio Personal</h2>
                    <p>Tu portfolio debe mostrar:</p>
                    <ul>
                        <li><strong>Competencia t√©cnica:</strong> Dominio de fundamentos</li>
                        <li><strong>Coherencia visual:</strong> Aproximaci√≥n consistente</li>
                        <li><strong>Diversidad tem√°tica:</strong> Rango de intereses</li>
                        <li><strong>Evoluci√≥n evidente:</strong> Progreso y experimentaci√≥n</li>
                    </ul>
                `
            },
            6: {
                title: 'Portfolio Final y Evaluaci√≥n Integral',
                meta: '‚è±Ô∏è 120 minutos | üìö Evaluaci√≥n | üéØ Nivel: S√≠ntesis',
                content: `
                    <h2>Proyecto Final: Portfolio Integral</h2>
                    <p>El portfolio final representa la culminaci√≥n de tu aprendizaje en los cuatro m√≥dulos. Debe demostrar no solo competencia t√©cnica, sino tambi√©n tu capacidad de integraci√≥n, expresi√≥n personal y aplicaci√≥n pedag√≥gica.</p>
                    
                    <div class="portfolio-section">
                        <div class="portfolio-title">üìã Requisitos del Portfolio Final</div>
                        <div class="portfolio-requirements">
                            <div class="requirement-item">
                                <div class="requirement-number">1. Fundamentos (M√≥dulo 1)</div>
                                <p>‚Ä¢ 2 figuras aplicando canon de 8 cabezas con 90% precisi√≥n<br>
                                ‚Ä¢ 1 an√°lisis de errores proporcionales corregidos<br>
                                ‚Ä¢ Demostraci√≥n de construcci√≥n sistem√°tica</p>
                            </div>
                            <div class="requirement-item">
                                <div class="requirement-number">2. Anatom√≠a Facial (M√≥dulo 2)</div>
                                <p>‚Ä¢ 2 retratos con proporciones faciales precisas<br>
                                ‚Ä¢ 1 estudio de expresi√≥n emocional<br>
                                ‚Ä¢ Aplicaci√≥n de diferentes √°ngulos y perspectivas</p>
                            </div>
                            <div class="requirement-item">
                                <div class="requirement-number">3. Torso y Extremidades (M√≥dulo 3)</div>
                                <p>‚Ä¢ 2 estudios biomec√°nicos de movimiento<br>
                                ‚Ä¢ 1 an√°lisis de centro de gravedad<br>
                                ‚Ä¢ Demostraci√≥n de articulaciones funcionales</p>
                            </div>
                            <div class="requirement-item">
                                <div class="requirement-number">4. Figura Completa (M√≥dulo 4)</div>
                                <p>‚Ä¢ 3 figuras completas con narrativa visual<br>
                                ‚Ä¢ 1 secuencia de movimiento din√°mico<br>
                                ‚Ä¢ Integraci√≥n de todos los elementos aprendidos</p>
                            </div>
                            <div class="requirement-item">
                                <div class="requirement-number">5. Desarrollo Personal</div>
                                <p>‚Ä¢ 2 obras que muestren tu estilo personal emergente<br>
                                ‚Ä¢ 1 autorreflexi√≥n escrita (500 palabras)<br>
                                ‚Ä¢ Evidencia de experimentaci√≥n estil√≠stica</p>
                            </div>
                            <div class="requirement-item">
                                <div class="requirement-number">6. Aplicaci√≥n Pedag√≥gica</div>
                                <p>‚Ä¢ 2 secuencias did√°cticas para nivel secundario<br>
                                ‚Ä¢ Material de apoyo visual para estudiantes<br>
                                ‚Ä¢ Estrategias de evaluaci√≥n espec√≠ficas</p>
                            </div>
                        </div>
                    </div>
                    
                    <h2>Criterios de Evaluaci√≥n</h2>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin: 1.5rem 0;">
                        <div style="background: white; padding: 1rem; border-radius: 8px; border-left: 4px solid var(--primary-dark);">
                            <h4 style="color: var(--primary-dark);">Competencia T√©cnica (30%)</h4>
                            <ul style="font-size: 0.9rem; margin: 0;">
                                <li>Precisi√≥n proporcional</li>
                                <li>Aplicaci√≥n del canon</li>
                                <li>Anatom√≠a correcta</li>
                                <li>Construcci√≥n sistem√°tica</li>
                            </ul>
                        </div>
                        <div style="background: white; padding: 1rem; border-radius: 8px; border-left: 4px solid var(--success);">
                            <h4 style="color: var(--success);">Integraci√≥n de Conocimientos (25%)</h4>
                            <ul style="font-size: 0.9rem; margin: 0;">
                                <li>S√≠ntesis de m√≥dulos</li>
                                <li>Coherencia visual</li>
                                <li>Aplicaci√≥n contextual</li>
                                <li>Resoluci√≥n de problemas</li>
                            </ul>
                        </div>
                        <div style="background: white; padding: 1rem; border-radius: 8px; border-left: 4px solid var(--warning);">
                            <h4 style="color: var(--warning);">Expresi√≥n Personal (20%)</h4>
                            <ul style="font-size: 0.9rem; margin: 0;">
                                <li>Desarrollo estil√≠stico</li>
                                <li>Narrativa visual</li>
                                <li>Originalidad</li>
                                <li>Comunicaci√≥n emocional</li>
                            </ul>
                        </div>
                        <div style="background: white; padding: 1rem; border-radius: 8px; border-left: 4px solid var(--info);">
                            <h4 style="color: var(--info);">Aplicaci√≥n Pedag√≥gica (15%)</h4>
                            <ul style="font-size: 0.9rem; margin: 0;">
                                <li>Secuencias did√°cticas</li>
                                <li>Material de apoyo</li>
                                <li>Estrategias evaluativas</li>
                                <li>Adaptaci√≥n a estudiantes</li>
                            </ul>
                        </div>
                        <div style="background: white; padding: 1rem; border-radius: 8px; border-left: 4px solid var(--danger);">
                            <h4 style="color: var(--danger);">Presentaci√≥n y Proceso (10%)</h4>
                            <ul style="font-size: 0.9rem; margin: 0;">
                                <li>Organizaci√≥n del portfolio</li>
                                <li>Calidad de presentaci√≥n</li>
                                <li>Reflexi√≥n metacognitiva</li>
                                <li>Evidencia de proceso</li>
                            </ul>
                        </div>
                    </div>
                    
                    <h2>Cronograma de Entrega</h2>
                    <div style="background: var(--gray-light); padding: 1.5rem; border-radius: 8px; margin: 1.5rem 0;">
                        <h3 style="color: var(--primary-dark); margin-bottom: 1rem;">Planificaci√≥n Sugerida</h3>
                        <ul>
                            <li><strong>Semana 1:</strong> Revisi√≥n y selecci√≥n de trabajos de m√≥dulos 1-3</li>
                            <li><strong>Semana 2:</strong> Creaci√≥n de figuras completas y desarrollo personal</li>
                            <li><strong>Semana 3:</strong> Dise√±o de secuencias did√°cticas y material pedag√≥gico</li>
                            <li><strong>Semana 4:</strong> Organizaci√≥n final, reflexi√≥n escrita y presentaci√≥n</li>
                        </ul>
                    </div>
                    
                    <div class="exercise-box">
                        <div class="exercise-title">üé® Proyecto Final: Tu Obra Maestra</div>
                        <p><strong>Obra Central del Portfolio:</strong> Crea una figura completa que represente tu m√°ximo nivel alcanzado.</p>
                        <p><strong>Requisitos espec√≠ficos:</strong></p>
                        <ol>
                            <li>Aplicaci√≥n perfecta del canon de 8 cabezas</li>
                            <li>Expresi√≥n facial que comunique una emoci√≥n espec√≠fica</li>
                            <li>Pose din√°mica que sugiera movimiento o acci√≥n</li>
                            <li>Composici√≥n que refuerce la narrativa</li>
                            <li>Elementos de tu estilo personal emergente</li>
                            <li>Narrativa visual clara y comunicativa</li>
                        </ol>
                        <p><strong>Tiempo estimado:</strong> 3-4 horas de trabajo concentrado</p>
                        <p><strong>Formato:</strong> M√≠nimo A4, t√©cnica libre (l√°piz, carboncillo, digital, etc.)</p>
                    </div>
                    
                    <h2>Gu√≠a de Autoreflexi√≥n</h2>
                    <p>Redacta una reflexi√≥n de 500 palabras que aborde estas preguntas:</p>
                    
                    <h3>Proceso de Aprendizaje</h3>
                    <ul>
                        <li>¬øCu√°l fue tu mayor desaf√≠o t√©cnico y c√≥mo lo superaste?</li>
                        <li>¬øQu√© descubriste sobre tus fortalezas y √°reas de mejora?</li>
                        <li>¬øC√≥mo evolucion√≥ tu confianza a lo largo del curso?</li>
                    </ul>
                    
                    <h3>Integraci√≥n de Conocimientos</h3>
                    <ul>
                        <li>¬øC√≥mo se relacionan los diferentes m√≥dulos en tu pr√°ctica actual?</li>
                        <li>¬øQu√© elementos consideras m√°s importantes para la figura humana?</li>
                        <li>¬øC√≥mo planeas continuar desarrollando estas competencias?</li>
                    </ul>
                    
                    <h3>Aplicaci√≥n Pedag√≥gica</h3>
                    <ul>
                        <li>¬øC√≥mo aplicar√°s estos conocimientos en tu futura pr√°ctica docente?</li>
                        <li>¬øQu√© aspectos consideras m√°s desafiantes de ense√±ar?</li>
                        <li>¬øQu√© estrategias desarrollaste para superar dificultades comunes?</li>
                    </ul>
                    
                    <div class="tip-box"><strong>Reflexi√≥n Efectiva:</strong> Se honesto sobre tu proceso. Las dificultades y errores son tan valiosos como los √©xitos para demostrar aprendizaje aut√©ntico y crecimiento personal.</div>
                    
                    <h2>Presentaci√≥n del Portfolio</h2>
                    <h3>Formato Digital Recomendado</h3>
                    <ul>
                        <li><strong>Archivo PDF:</strong> M√°ximo 20 p√°ginas, resoluci√≥n 300 DPI</li>
                        <li><strong>Estructura:</strong> Portada ‚Üí √çndice ‚Üí Trabajos por m√≥dulo ‚Üí Reflexi√≥n ‚Üí Anexos</li>
                        <li><strong>Calidad de imagen:</strong> Fotos bien iluminadas, sin distorsi√≥n</li>
                        <li><strong>Descripci√≥n:</strong> Breve texto explicativo por cada trabajo</li>
                    </ul>
                    
                    <h3>Estructura Sugerida</h3>
                    <ol>
                        <li><strong>Portada:</strong> Nombre, t√≠tulo del curso, fecha</li>
                        <li><strong>Introducci√≥n:</strong> Breve presentaci√≥n personal y objetivos</li>
                        <li><strong>M√≥dulo 1:</strong> Trabajos de fundamentos y proporci√≥n</li>
                        <li><strong>M√≥dulo 2:</strong> Estudios de anatom√≠a facial</li>
                        <li><strong>M√≥dulo 3:</strong> An√°lisis de torso y extremidades</li>
                        <li><strong>M√≥dulo 4:</strong> Figuras completas e integraci√≥n</li>
                        <li><strong>Desarrollo Personal:</strong> Experimentaci√≥n estil√≠stica</li>
                        <li><strong>Aplicaci√≥n Pedag√≥gica:</strong> Secuencias did√°cticas</li>
                        <li><strong>Reflexi√≥n Final:</strong> Autoan√°lisis del proceso</li>
                        <li><strong>Anexos:</strong> Bocetos, proceso, referencias</li>
                    </ol>
                    
                    <div class="integration-box"><strong>Logro Acad√©mico:</strong> Al completar este portfolio habr√°s demostrado competencia en los cinco objetivos de aprendizaje del curso: t√©cnico, procedimental, pedag√≥gico, expresivo y tecnol√≥gico.</div>
                    
                    <h2>Evaluaci√≥n Final y Certificaci√≥n</h2>
                    <p>La evaluaci√≥n final considera:</p>
                    <ul>
                        <li><strong>Portfolio completo:</strong> 70% de la calificaci√≥n final</li>
                        <li><strong>Participaci√≥n en plataforma:</strong> 20% (completaci√≥n de lecciones, ejercicios)</li>
                        <li><strong>Reflexi√≥n metacognitiva:</strong> 10% (calidad de autoan√°lisis)</li>
                    </ul>
                    
                    <h3>Criterios de Aprobaci√≥n</h3>
                    <ul>
                        <li>Calificaci√≥n m√≠nima: 85% (equivalente a 6.0 en escala chilena)</li>
                        <li>Completaci√≥n del 100% de ejercicios requeridos</li>
                        <li>Entrega puntual del portfolio final</li>
                        <li>Demostraci√≥n de progreso measurable en competencias t√©cnicas</li>
                    </ul>
                    
                    <div class="exercise-box">
                        <div class="exercise-title">üìù Checklist Final de Entrega</div>
                        <p>Antes de entregar tu portfolio, verifica que incluyas:</p>
                        <ul style="list-style: none; margin-left: 0;">
                            <li>‚òê Portfolio PDF organizado y completo</li>
                            <li>‚òê M√≠nimo 12 trabajos finalizados</li>
                            <li>‚òê 2 secuencias did√°cticas desarrolladas</li>
                            <li>‚òê Reflexi√≥n personal de 500 palabras</li>
                            <li>‚òê Evidencia de aplicaci√≥n del canon de 8 cabezas</li>
                            <li>‚òê Demostraci√≥n de integraci√≥n de conocimientos</li>
                            <li>‚òê Elementos de desarrollo estil√≠stico personal</li>
                            <li>‚òê Narrativa visual en figuras completas</li>
                        </ul>
                    </div>
                    
                    <h2>Pr√≥ximos Pasos</h2>
                    <p>Al completar exitosamente este m√≥dulo habr√°s logrado:</p>
                    <ul>
                        <li>‚úÖ <strong>Competencia t√©cnica:</strong> Dominio del canon de 8 cabezas aplicado a figuras completas</li>
                        <li>‚úÖ <strong>Integraci√≥n sistem√°tica:</strong> S√≠ntesis de proporciones, anatom√≠a facial y biomec√°nica</li>
                        <li>‚úÖ <strong>Expresi√≥n personal:</strong> Desarrollo de aproximaci√≥n estil√≠stica propia</li>
                        <li>‚úÖ <strong>Narrativa visual:</strong> Capacidad de comunicar historias a trav√©s del dibujo</li>
                        <li>‚úÖ <strong>Aplicaci√≥n pedag√≥gica:</strong> Herramientas para ense√±ar dibujo anat√≥mico efectivamente</li>
                    </ul>
                    
                    <p><strong>Continuidad del aprendizaje:</strong> Este curso te proporciona las bases s√≥lidas para continuar desarrollando tus competencias art√≠sticas de manera aut√≥noma. Considera especializarte en √°reas espec√≠ficas como retrato, figura en movimiento, o ilustraci√≥n narrativa.</p>
                    
                    <div class="tip-box"><strong>¬°Felicitaciones!</strong> Has completado un proceso intensivo de recuperaci√≥n y desarrollo de competencias en dibujo anat√≥mico. El portafolio que has creado es evidencia tangible de tu crecimiento como artista y futuro docente.</div>
                `
            }
        };

        // Inicializaci√≥n
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Inicializando M√≥dulo 4...');
            
            // Verificar autenticaci√≥n
            let currentUser = getCurrentUser();
            
            if (!currentUser) {
                console.log('No hay usuario autenticado, creando usuario demo para pruebas...');
                currentUser = createDemoUser();
                console.log('Usuario demo creado:', currentUser);
            } else {
                console.log('Usuario autenticado encontrado:', currentUser);
            }

            // Verificar protecci√≥n de p√°gina
            if (!protectPage()) {
                return;
            }

            // Asignar usuario global
            window.currentUser = currentUser;

            console.log('Usuario final en m√≥dulo:', currentUser);

            // Cargar progreso
            loadModuleProgress();
            
            // Cargar primera lecci√≥n
            loadLesson(1);
            
            // Registrar actividad
            logUserActivity('module_access', currentUser, { 
                moduleId: 4,
                moduleTitle: 'Figura Completa'
            });
        });

        // Cargar progreso del m√≥dulo
        function loadModuleProgress() {
            const currentUser = getCurrentUser();
            if (currentUser && currentUser.role === 'estudiante') {
                const progressKey = `progress_${currentUser.email}`;
                const userProgress = JSON.parse(localStorage.getItem(progressKey) || 'null');
                
                if (userProgress && userProgress.modules[4]) {
                    moduleProgress = userProgress.modules[4].progress || 0;
                    completedLessons = userProgress.modules[4].completedLessons || [];
                }
            }
            
            updateProgressDisplay();
            updateSidebarProgress();
        }

        // Actualizar visualizaci√≥n del progreso
        function updateProgressDisplay() {
            document.getElementById('progressText').textContent = moduleProgress + '% Completado';
            
            const progressBar = document.getElementById('moduleProgress');
            progressBar.style.width = moduleProgress + '%';
            progressBar.querySelector('span').textContent = moduleProgress + '%';
        }

        // Actualizar progreso en sidebar
        function updateSidebarProgress() {
            document.querySelectorAll('.lesson-link').forEach((link, index) => {
                const lessonNumber = index + 1;
                if (completedLessons.includes(lessonNumber)) {
                    link.classList.add('completed');
                }
            });
        }

        // Cargar lecci√≥n espec√≠fica
        function loadLesson(lessonNumber) {
            currentLesson = lessonNumber;
            
            // Actualizar sidebar
            document.querySelectorAll('.lesson-link').forEach((link, index) => {
                link.classList.remove('active');
                if (index + 1 === lessonNumber) {
                    link.classList.add('active');
                }
            });

            // Actualizar contenido
            const lesson = lessonsContent[lessonNumber];
            if (lesson) {
                document.querySelector('.lesson-title').textContent = lesson.title;
                document.querySelector('.lesson-meta').innerHTML = lesson.meta;
                document.getElementById('lessonContent').innerHTML = lesson.content;
            }

            // Actualizar botones de navegaci√≥n
            updateNavigationButtons();

            // Animaci√≥n de contenido
            const content = document.getElementById('mainContent');
            content.classList.remove('fade-in');
            setTimeout(() => {
                content.classList.add('fade-in');
            }, 100);

            console.log('Lecci√≥n cargada:', lessonNumber);
        }

        // Actualizar botones de navegaci√≥n
        function updateNavigationButtons() {
            const prevButton = document.getElementById('prevButton');
            const nextButton = document.getElementById('nextButton');
            const completeButton = document.getElementById('completeButton');

            // Bot√≥n anterior
            if (currentLesson <= 1) {
                prevButton.disabled = true;
            } else {
                prevButton.disabled = false;
                prevButton.onclick = () => loadLesson(currentLesson - 1);
            }

            // Bot√≥n siguiente
            if (currentLesson >= 6) {
                nextButton.style.display = 'none';
            } else {
                nextButton.style.display = 'flex';
                nextButton.onclick = () => loadLesson(currentLesson + 1);
            }

            // Bot√≥n completar
            if (completedLessons.includes(currentLesson)) {
                completeButton.textContent = '‚úì Lecci√≥n Completada';
                completeButton.style.background = 'var(--success)';
            } else {
                completeButton.textContent = 'Marcar como Completada';
                completeButton.style.background = 'var(--success)';
            }
        }

        // Completar lecci√≥n
        function completeLesson() {
            if (!completedLessons.includes(currentLesson)) {
                completedLessons.push(currentLesson);
                
                // Calcular nuevo progreso
                moduleProgress = Math.round((completedLessons.length / 6) * 100);
                
                // Guardar progreso
                saveProgress();
                
                // Actualizar UI
                updateProgressDisplay();
                updateSidebarProgress();
                updateNavigationButtons();
                
                // Mostrar notificaci√≥n
                if (currentLesson === 6) {
                    showNotification('¬°Felicitaciones! Has completado todo el curso de Dibujo Anat√≥mico', 'success');
                } else {
                    showNotification('¬°Lecci√≥n completada!', 'success');
                }
                
                // Auto-avanzar si no es la √∫ltima lecci√≥n
                if (currentLesson < 6) {
                    setTimeout(() => {
                        loadLesson(currentLesson + 1);
                    }, 2000);
                }
            }
        }

        // Guardar progreso
        function saveProgress() {
            const currentUser = getCurrentUser();
            if (currentUser && currentUser.role === 'estudiante') {
                const progressKey = `progress_${currentUser.email}`;
                let userProgress = JSON.parse(localStorage.getItem(progressKey) || 'null');
                
                if (!userProgress) {
                    userProgress = {
                        modules: {
                            1: { completed: false, progress: 0, timeSpent: 0, completedLessons: [] },
                            2: { completed: false, progress: 0, timeSpent: 0, completedLessons: [] },
                            3: { completed: false, progress: 0, timeSpent: 0, completedLessons: [] },
                            4: { completed: false, progress: 0, timeSpent: 0, completedLessons: [] }
                        },
                        overallProgress: 0,
                        totalTimeSpent: 0,
                        lastActivity: new Date().toISOString()
                    };
                }

                // Actualizar m√≥dulo 4
                userProgress.modules[4].progress = moduleProgress;
                userProgress.modules[4].completed = moduleProgress >= 100;
                userProgress.modules[4].completedLessons = completedLessons;
                userProgress.modules[4].lastUpdate = new Date().toISOString();

                // Calcular progreso general
                const completedModules = Object.values(userProgress.modules).filter(m => m.completed).length;
                userProgress.overallProgress = Math.round((completedModules / 4) * 100);
                userProgress.lastActivity = new Date().toISOString();

                localStorage.setItem(progressKey, JSON.stringify(userProgress));

                // Registrar actividad
                logUserActivity('lesson_completed', currentUser, {
                    moduleId: 4,
                    lessonId: currentLesson,
                    progress: moduleProgress
                });
            }
        }

        // Funciones de quiz
        function selectAnswer(element, isCorrect) {
            // Resetear todas las opciones
            document.querySelectorAll('.quiz-option').forEach(opt => {
                opt.classList.remove('selected', 'correct', 'incorrect');
            });

            // Marcar seleccionada
            element.classList.add('selected');
            
            // Mostrar resultado despu√©s de un delay
            setTimeout(() => {
                if (isCorrect) {
                    element.classList.add('correct');
                    showNotification('¬°Correcto!');
                } else {
                    element.classList.add('incorrect');
                    showNotification('Intenta de nuevo', 'error');
                }
            }, 500);
        }

        // Reproducir video (placeholder)
        function playVideo() {
            showNotification('Video player: En una implementaci√≥n real, aqu√≠ se reproducir√≠a el video educativo.', 'info');
        }

        // Mostrar notificaci√≥n
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification ${type} show`;
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 4000);
        }

        // Obtener t√≠tulo de lecci√≥n
        function getLessonTitle(num) {
            const lesson = lessonsContent[num];
            return lesson ? lesson.title : 'Lecci√≥n';
        }

        // Manejar errores
        window.addEventListener('error', function(e) {
            console.error('Error en m√≥dulo:', e);
            showNotification('Ha ocurrido un error. Recarga la p√°gina si persiste.', 'error');
        });
    </script>
</body>
</html>
                

                