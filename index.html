<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Curso de Dibujo y Representación del Cuerpo Humano - Universidad Alberto Hurtado">
    <meta name="author" content="Joselyn Vizcarra">
    <title>Curso de Dibujo Anatómico - LMS UAH</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    
    <style>
        :root {
            --primary-dark: #2c5f66;
            --primary-light: #e8a2b8;
            --dark: #1a1a1a;
            --gray-light: #f5f5f5;
            --gray-medium: #666;
            --success: #4CAF50;
            --danger: #f44336;
            --warning: #FFC107;
            --info: #2196F3;
            --whatsapp-green: #25D366;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #e8ecf1 100%);
            min-height: 100vh;
            color: var(--dark);
            line-height: 1.6;
        }

        /* ===== HEADER ===== */
        .header-uah {
            background: linear-gradient(135deg, var(--primary-dark), var(--dark));
            color: white;
            padding: 1rem 0;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
            position: sticky;
            top: 0;
            z-index: 1030;
            backdrop-filter: blur(10px);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo-section h1 {
            font-size: 1.3rem;
            font-weight: 700;
            margin: 0;
            background: linear-gradient(135deg, white, var(--primary-light));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .user-section {
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }

        .user-badge {
            background: rgba(255,255,255,0.15);
            padding: 0.6rem 1.2rem;
            border-radius: 50px;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
            transition: all 0.3s ease;
        }

        .user-badge:hover {
            background: rgba(255,255,255,0.25);
            transform: translateY(-2px);
        }

        .user-avatar {
            width: 36px;
            height: 36px;
            background: linear-gradient(135deg, var(--primary-light), #ff9cc5);
            color: var(--dark);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }

        .btn-logout {
            background: rgba(244, 67, 54, 0.2);
            border: 1px solid rgba(244, 67, 54, 0.4);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 25px;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .btn-logout:hover {
            background: var(--danger);
            border-color: var(--danger);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(244, 67, 54, 0.3);
        }

        /* ===== DASHBOARD DEL ESTUDIANTE - REDISEÑADO ===== */
        .dashboard-container {
            max-width: 1400px;
            margin: 2rem auto;
            padding: 0 2rem;
        }

        .dashboard-welcome {
            background: linear-gradient(135deg, var(--primary-dark), #1a3a3f);
            color: white;
            padding: 3rem 2.5rem;
            border-radius: 20px;
            margin-bottom: 2rem;
            box-shadow: 0 10px 40px rgba(0,0,0,0.15);
            position: relative;
            overflow: hidden;
        }

        .dashboard-welcome::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -10%;
            width: 400px;
            height: 400px;
            background: radial-gradient(circle, rgba(232,162,184,0.2) 0%, transparent 70%);
            border-radius: 50%;
        }

        .dashboard-welcome::after {
            content: '';
            position: absolute;
            bottom: -30%;
            left: -5%;
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, rgba(232,162,184,0.15) 0%, transparent 70%);
            border-radius: 50%;
        }

        .welcome-content {
            position: relative;
            z-index: 1;
        }

        .welcome-greeting {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            color: var(--primary-light);
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .welcome-subtitle {
            font-size: 1.1rem;
            opacity: 0.95;
            margin-bottom: 0;
        }

        /* ===== GRID DE PROGRESO ===== */
        .progress-grid {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 2rem;
            margin-bottom: 3rem;
        }

        @media (max-width: 992px) {
            .progress-grid {
                grid-template-columns: 1fr;
            }
        }

        /* ===== TARJETA DE PROGRESO CIRCULAR ===== */
        .progress-card {
            background: white;
            border-radius: 20px;
            padding: 2.5rem;
            box-shadow: 0 8px 30px rgba(0,0,0,0.08);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .progress-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px rgba(0,0,0,0.12);
            border-color: var(--primary-light);
        }

        .progress-circle-container {
            position: relative;
            width: 180px;
            height: 180px;
            margin-bottom: 1.5rem;
        }

        .progress-circle {
            position: relative;
            width: 100%;
            height: 100%;
        }

        .progress-circle svg {
            transform: rotate(-90deg);
            filter: drop-shadow(0 4px 8px rgba(44,95,102,0.2));
        }

        .progress-circle-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
        }

        .progress-percentage {
            font-size: 3rem;
            font-weight: 800;
            color: var(--primary-dark);
            line-height: 1;
            display: block;
        }

        .progress-label {
            font-size: 0.9rem;
            color: var(--gray-medium);
            margin-top: 0.5rem;
            font-weight: 500;
        }

        .progress-details {
            font-size: 1rem;
            color: var(--dark);
            margin-top: 1rem;
            line-height: 1.6;
        }

        /* ===== TARJETA DE ESTADÍSTICAS ===== */
        .stats-card {
            background: white;
            border-radius: 20px;
            padding: 2.5rem;
            box-shadow: 0 8px 30px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .stats-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px rgba(0,0,0,0.12);
            border-color: var(--primary-light);
        }

        .stats-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 3px solid var(--gray-light);
        }

        .stats-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--primary-dark), var(--primary-light));
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            box-shadow: 0 4px 12px rgba(44,95,102,0.3);
        }

        .stats-title {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--dark);
            margin: 0;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
        }

        .stat-item {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            padding: 1.5rem;
            border-radius: 15px;
            text-align: center;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .stat-item:hover {
            background: linear-gradient(135deg, #e9ecef, #dee2e6);
            border-color: var(--primary-light);
            transform: scale(1.05);
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--primary-dark);
            display: block;
            line-height: 1;
            margin-bottom: 0.5rem;
        }

        .stat-label {
            font-size: 0.95rem;
            color: var(--gray-medium);
            font-weight: 500;
        }

        /* ===== SIGUIENTE TAREA - REDISEÑADO ===== */
.next-task-section {
    background: white;
    border-radius: 20px;
    padding: 2.5rem;
    margin-bottom: 3rem;
    box-shadow: 0 8px 30px rgba(0,0,0,0.08);
    border-left: 6px solid var(--warning);
    transition: all 0.3s ease;
}

.next-task-section:hover {
    transform: translateX(5px);
    box-shadow: 0 12px 40px rgba(0,0,0,0.12);
}

.next-task-header {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-bottom: 1.5rem;
}

.next-task-icon {
    width: 50px;
    height: 50px;
    background: linear-gradient(135deg, var(--warning), #ffa000);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 1.5rem;
    box-shadow: 0 4px 12px rgba(255,193,7,0.4);
    animation: pulse 2s infinite;
}

@keyframes pulse {
    0%, 100% {
        transform: scale(1);
        box-shadow: 0 4px 12px rgba(255,193,7,0.4);
    }
    50% {
        transform: scale(1.05);
        box-shadow: 0 6px 20px rgba(255,193,7,0.6);
    }
}

.next-task-title {
    font-size: 1.3rem;
    font-weight: 700;
    color: var(--dark);
    margin: 0;
}

/* NUEVOS ESTILOS PARA EL HERO */
.next-step-hero {
    background: linear-gradient(135deg, #f8f9fa, #e9ecef);
    padding: 2rem;
    border-radius: 16px;
    margin-top: 1rem;
    border: 2px solid var(--gray-border);
    text-align: center;
}

.next-step-title {
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 1.5rem;
    color: var(--primary-dark);
}

.next-step-btn {
    padding: 1rem 2.5rem;
    font-size: 1.2rem;
    font-weight: 700;
    border-radius: 50px;
    box-shadow: 0 8px 24px rgba(0,0,0,0.15);
    transition: all 0.3s ease;
    background: linear-gradient(135deg, var(--primary-dark), var(--primary-light));
    border: none;
    color: white;
}

.next-step-btn:hover {
    transform: translateY(-4px);
    box-shadow: 0 12px 32px rgba(0,0,0,0.2);
    background: linear-gradient(135deg, var(--primary-hover), var(--primary-dark));
    color: white;
}

.progress-indicator-inline {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.9rem;
    color: var(--gray-medium);
    margin-top: 1rem;
}

        /* ===== DESGLOSE DE MÓDULOS - MEJORADO ===== */
        .modules-breakdown-section {
            background: white;
            border-radius: 20px;
            padding: 2.5rem;
            margin-bottom: 3rem;
            box-shadow: 0 8px 30px rgba(0,0,0,0.08);
        }

        .section-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 3px solid var(--gray-light);
        }

        .section-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--info), #1976d2);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            box-shadow: 0 4px 12px rgba(33,150,243,0.3);
        }

        .section-title {
            font-size: 1.6rem;
            font-weight: 700;
            color: var(--dark);
            margin: 0;
        }

        .modules-breakdown-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        .breakdown-module-card {
            background: linear-gradient(135deg, #f8f9fa, #ffffff);
            border-radius: 15px;
            padding: 2rem;
            border: 2px solid var(--gray-light);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .breakdown-module-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 30px rgba(0,0,0,0.1);
            border-color: var(--primary-light);
        }

        .breakdown-module-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-dark), var(--primary-light));
        }

        .breakdown-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
        }

        .breakdown-status-icon {
            font-size: 1.5rem;
        }

        .breakdown-title {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--dark);
            margin: 0;
            flex: 1;
        }

        .breakdown-progress-bar {
            height: 12px;
            background: #e9ecef;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 1rem;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
        }

        .breakdown-progress-fill {
            height: 100%;
            border-radius: 10px;
            transition: width 0.5s ease;
            background: linear-gradient(90deg, var(--success), #66bb6a);
            box-shadow: 0 2px 4px rgba(76,175,80,0.3);
        }

        .breakdown-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid #e9ecef;
        }

        .breakdown-lessons {
            font-size: 0.95rem;
            color: var(--gray-medium);
            font-weight: 500;
        }

        .breakdown-badge {
            padding: 0.4rem 1rem;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .badge-completed {
            background: rgba(76,175,80,0.15);
            color: var(--success);
            border: 1px solid var(--success);
        }

        .badge-in-progress {
            background: rgba(255,193,7,0.15);
            color: var(--warning);
            border: 1px solid var(--warning);
        }

        .badge-not-started {
            background: rgba(108,117,125,0.15);
            color: var(--gray-medium);
            border: 1px solid var(--gray-medium);
        }

        /* ===== SECCIÓN DE MÓDULOS ===== */
        .modules-section {
            max-width: 1400px;
            margin: 3rem auto;
            padding: 0 2rem;
        }

        .modules-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .modules-title {
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--dark);
            margin-bottom: 1rem;
            background: linear-gradient(135deg, var(--primary-dark), var(--primary-light));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .modules-subtitle {
            font-size: 1.1rem;
            color: var(--gray-medium);
            max-width: 600px;
            margin: 0 auto;
        }

        .modules-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        /* ===== TARJETAS DE MÓDULO - MEJORADAS ===== */
        .module-card {
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 8px 30px rgba(0,0,0,0.08);
            transition: all 0.4s ease;
            border: 2px solid transparent;
            position: relative;
        }

        .module-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 50px rgba(0,0,0,0.15);
            border-color: var(--primary-light);
        }

        .module-card.locked {
            opacity: 0.7;
            filter: grayscale(0.3);
        }

        .module-card.locked:hover {
            transform: none;
        }

        .locked-overlay {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(244, 67, 54, 0.95);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            z-index: 10;
            box-shadow: 0 4px 12px rgba(244, 67, 54, 0.4);
        }

        .module-header {
            background: linear-gradient(135deg, var(--primary-dark), var(--dark));
            color: white;
            padding: 2.5rem 2rem;
            position: relative;
            overflow: hidden;
        }

        .module-header::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -20%;
            width: 200px;
            height: 200px;
            background: radial-gradient(circle, rgba(232,162,184,0.3) 0%, transparent 70%);
            border-radius: 50%;
        }

        .module-number {
            display: inline-block;
            background: var(--primary-light);
            color: var(--dark);
            padding: 0.5rem 1.2rem;
            border-radius: 25px;
            font-size: 0.9rem;
            font-weight: 700;
            margin-bottom: 1rem;
            box-shadow: 0 2px 8px rgba(232,162,184,0.4);
        }

        .module-title {
            font-size: 1.6rem;
            font-weight: 800;
            margin-bottom: 0.5rem;
            line-height: 1.3;
        }

        .module-subtitle {
            font-size: 1rem;
            opacity: 0.9;
            margin: 0;
        }

        .module-body {
            padding: 2rem;
        }

        .locked-message {
            background: rgba(244, 67, 54, 0.1);
            border-left: 4px solid var(--danger);
            padding: 1rem 1.2rem;
            border-radius: 8px;
            margin-bottom: 1.5rem;
            font-size: 0.95rem;
            color: var(--danger);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .module-description {
            font-size: 1rem;
            color: var(--dark);
            line-height: 1.7;
            margin-bottom: 1.5rem;
        }

        .module-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin-bottom: 1.5rem;
            padding: 1.2rem;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 12px;
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
            color: var(--gray-medium);
            font-weight: 500;
        }

        .meta-item i {
            color: var(--primary-dark);
            font-size: 1.1rem;
        }

        .module-progress-container {
            margin-bottom: 1.5rem;
        }

        .module-progress-bar {
            height: 10px;
            background: #e9ecef;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 0.75rem;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.08);
        }

        .module-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--success), #66bb6a);
            border-radius: 10px;
            transition: width 0.5s ease;
            box-shadow: 0 2px 4px rgba(76,175,80,0.3);
        }

        .progress-label {
            font-size: 0.9rem;
            color: var(--gray-medium);
            font-weight: 600;
            text-align: right;
        }

        .module-actions {
            display: flex;
            gap: 1rem;
        }

        .btn-module {
            flex: 1;
            padding: 1rem 1.5rem;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 700;
            text-decoration: none;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn-primary-custom {
            background: linear-gradient(135deg, var(--primary-dark), var(--primary-light));
            color: white;
            box-shadow: 0 4px 15px rgba(44,95,102,0.3);
        }

        .btn-primary-custom:hover {
            background: linear-gradient(135deg, #1a4a4f, #d88fa0);
            transform: translateY(-3px);
            box-shadow: 0 6px 25px rgba(44,95,102,0.4);
            color: white;
        }

        .btn-secondary-custom {
            background: linear-gradient(135deg, #6c757d, #5a6268);
            color: white;
            box-shadow: 0 4px 15px rgba(108,117,125,0.3);
        }

        .btn-secondary-custom:hover {
            background: linear-gradient(135deg, #5a6268, #495057);
            transform: translateY(-3px);
            box-shadow: 0 6px 25px rgba(108,117,125,0.4);
            color: white;
        }

        .btn-module.locked {
            background: #e9ecef;
            color: #adb5bd;
            cursor: not-allowed;
            box-shadow: none;
        }

        .btn-module.locked:hover {
            transform: none;
        }

        /* ===== MENTOR ANATÓMICO - ESTILO ORIGINAL COMPLETO ===== */
        .mentor-float-button {
            position: fixed;
            bottom: 8rem;
            right: 2rem;
            width: 64px;
            height: 64px;
            background: linear-gradient(135deg, var(--primary-dark), var(--primary-light));
            border-radius: 50%;
            box-shadow: 0 6px 20px rgba(44, 95, 102, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 1045;
            transition: all 0.3s ease;
            border: 3px solid white;
        }

        .mentor-float-button:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 25px rgba(44, 95, 102, 0.7);
        }

        .mentor-float-button i {
            color: white;
            font-size: 2rem;
        }

        .mentor-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background: var(--danger);
            color: white;
            border-radius: 50%;
            width: 26px;
            height: 26px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: bold;
            border: 2px solid white;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.15); }
        }

        .mentor-chat-container {
            position: fixed;
            bottom: 8rem;
            right: 2rem;
            width: 400px;
            max-width: calc(100vw - 2rem);
            height: 600px;
            max-height: calc(100vh - 10rem);
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            display: none;
            flex-direction: column;
            overflow: hidden;
            z-index: 1050;
            animation: slideUp 0.3s ease-out;
        }

        .mentor-chat-container.show {
            display: flex;
        }

        /* ===== BACKDROP PARA CERRAR MENTOR ===== */
        .mentor-backdrop {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(3px);
            z-index: 1049;
            display: none;
            opacity: 0;
            transition: opacity 0.3s ease;
            cursor: pointer;
        }

        .mentor-backdrop.show {
            display: block;
            opacity: 1;
        }


        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .mentor-chat-header {
            background: linear-gradient(135deg, var(--primary-dark), var(--primary-light));
            color: white;
            padding: 1.25rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-radius: 20px 20px 0 0;
        }

        .mentor-chat-header-info {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .mentor-avatar {
            width: 46px;
            height: 46px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.6rem;
        }

        .mentor-status {
            display: flex;
            flex-direction: column;
        }

        .mentor-name {
            font-weight: 600;
            font-size: 1.05rem;
        }

        .mentor-online {
            font-size: 0.8rem;
            opacity: 0.9;
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            background: #4CAF50;
            border-radius: 50%;
            animation: blink 2s infinite;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .mentor-close-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .mentor-close-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: rotate(90deg);
        }

        .mentor-chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 1.25rem;
            background: #f0f2f5;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .mentor-chat-messages::-webkit-scrollbar {
            width: 6px;
        }

        .mentor-chat-messages::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        .mentor-chat-messages::-webkit-scrollbar-thumb {
            background: var(--primary-light);
            border-radius: 3px;
        }

        .message {
            display: flex;
            gap: 0.5rem;
            animation: fadeInMessage 0.3s ease-out;
        }

        @keyframes fadeInMessage {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.user {
            flex-direction: row-reverse;
        }

        .message-bubble {
            max-width: 75%;
            padding: 0.75rem 1rem;
            border-radius: 18px;
            font-size: 0.9rem;
            line-height: 1.4;
            word-wrap: break-word;
        }

        .message.mentor .message-bubble {
            background: white;
            color: var(--dark);
            border-bottom-left-radius: 4px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .message.user .message-bubble {
            background: linear-gradient(135deg, var(--primary-dark), var(--primary-light));
            color: white;
            border-bottom-right-radius: 4px;
        }

        .message-actions {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 0.75rem;
        }

        .action-button {
            background: white;
            border: 2px solid var(--primary-light);
            color: var(--primary-dark);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.2s ease;
            font-weight: 500;
        }

        .action-button:hover {
            background: var(--primary-light);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
        }

        .mentor-chat-input-container {
            padding: 1rem;
            background: white;
            border-top: 1px solid #e9ecef;
            display: flex;
            gap: 0.75rem;
            align-items: flex-end;
        }

        .mentor-chat-input {
            flex: 1;
            border: 2px solid var(--gray-light);
            border-radius: 25px;
            padding: 0.75rem 1rem;
            font-size: 0.9rem;
            resize: none;
            max-height: 100px;
            font-family: inherit;
            transition: border-color 0.2s ease;
        }

        .mentor-chat-input:focus {
            outline: none;
            border-color: var(--primary-light);
        }

        .mentor-send-btn {
            background: linear-gradient(135deg, var(--primary-dark), var(--primary-light));
            border: none;
            color: white;
            width: 42px;
            height: 42px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .mentor-send-btn:hover:not(:disabled) {
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(44, 95, 102, 0.3);
        }

        .mentor-send-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .typing-indicator {
            display: none;
            gap: 0.3rem;
            padding: 0.75rem 1rem;
            background: white;
            border-radius: 18px;
            border-bottom-left-radius: 4px;
            width: fit-content;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .typing-indicator.show {
            display: flex;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            background: var(--gray-medium);
            border-radius: 50%;
            animation: typing 1.4s infinite;
        }

        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-10px); }
        }

        @media (max-width: 768px) {
            .mentor-chat-container {
                width: calc(100vw - 1rem);
                height: calc(100vh - 160px);
                bottom: 4rem;
                right: 0.5rem;
                left: 0.5rem;
                border-radius: 16px;
                max-height: calc(100vh - 160px);
            }

            .mentor-float-button {
                bottom: 4rem;
                right: 1rem;
                width: 56px;
                height: 56px;
            }
            
            .mentor-chat-header {
                padding: 1rem;
            }
            
            .mentor-avatar {
                width: 40px;
                height: 40px;
                font-size: 1.4rem;
            }
            
            .mentor-name {
                font-size: 0.95rem;
            }
            
            .btn-close-mentor {
                padding: 0.4rem;
            }
        }

        /* ===== OVERLAY DE CARGA - POSICIÓN AJUSTADA ===== */
        .loading-overlay {
            position: fixed;
            top: 72px;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 1025;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .loading-overlay.show {
            opacity: 1;
            visibility: visible;
        }

        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 5px solid #e9ecef;
            border-top-color: var(--primary-dark);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loading-text {
            margin-top: 1.5rem;
            font-size: 1.1rem;
            color: var(--dark);
            font-weight: 600;
        }

        /* ===== ANIMACIONES ===== */
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in-up {
            animation: fadeInUp 0.6s ease-out;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* ===== SECCIÓN: INFORMACIÓN DEL CURSO ===== */
        .course-info-section {
            max-width: 1400px;
            margin: 0 auto 3rem;
            padding: 0 2rem;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 2rem;
        }

        .info-card-modern {
            background: white;
            border-radius: 20px;
            padding: 0;
            box-shadow: 0 8px 30px rgba(0,0,0,0.08);
            overflow: hidden;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .info-card-modern:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px rgba(0,0,0,0.12);
            border-color: var(--primary-light);
        }

        .info-card-header {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            padding: 2rem;
            display: flex;
            align-items: center;
            gap: 1.5rem;
            border-bottom: 3px solid var(--gray-light);
        }

        .info-card-icon {
            width: 60px;
            height: 60px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.8rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .info-card-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--dark);
            margin: 0;
        }

        .info-card-body {
            padding: 2rem;
        }

        /* Objetivos */
        .objective-item {
            display: flex;
            gap: 1.5rem;
            margin-bottom: 1.5rem;
            padding: 1.5rem;
            background: linear-gradient(135deg, #f8f9fa, #ffffff);
            border-radius: 12px;
            transition: all 0.3s ease;
        }

        .objective-item:hover {
            background: linear-gradient(135deg, #e9ecef, #f8f9fa);
            transform: translateX(5px);
        }

        .objective-item:last-child {
            margin-bottom: 0;
        }

        .objective-number {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--primary-dark), var(--primary-light));
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: 700;
            flex-shrink: 0;
            box-shadow: 0 4px 12px rgba(44,95,102,0.3);
        }

        .objective-text strong {
            display: block;
            font-size: 1.1rem;
            color: var(--primary-dark);
            margin-bottom: 0.5rem;
        }

        .objective-text p {
            margin: 0;
            color: var(--gray-medium);
            line-height: 1.6;
        }

        /* Entregables */
        .deliverable-item {
            display: flex;
            gap: 1.5rem;
            align-items: center;
            padding: 1.5rem;
            background: linear-gradient(135deg, #f8f9fa, #ffffff);
            border-radius: 12px;
            margin-bottom: 1rem;
            transition: all 0.3s ease;
        }

        .deliverable-item:hover {
            background: linear-gradient(135deg, #e9ecef, #f8f9fa);
            transform: translateX(5px);
        }

        .deliverable-item:last-child {
            margin-bottom: 0;
        }

        .deliverable-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--info), #42a5f5);
            color: white;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            flex-shrink: 0;
            box-shadow: 0 4px 12px rgba(33,150,243,0.3);
        }

        .deliverable-content {
            flex: 1;
        }

        .deliverable-number {
            font-size: 2rem;
            font-weight: 800;
            color: var(--primary-dark);
            margin-right: 0.5rem;
        }

        .deliverable-label {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--dark);
        }

        .deliverable-desc {
            margin: 0.25rem 0 0 0;
            font-size: 0.9rem;
            color: var(--gray-medium);
        }

        /* ===== SECCIÓN: VISTA RÁPIDA ===== */
        .quick-view-section {
            max-width: 1400px;
            margin: 0 auto 3rem;
            padding: 0 2rem;
        }

        .quick-view-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 2rem;
        }

        .quick-card {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 8px 30px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .quick-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 45px rgba(0,0,0,0.15);
            border-color: var(--primary-light);
        }

        .quick-card-icon {
            width: 70px;
            height: 70px;
            border-radius: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 6px 20px rgba(0,0,0,0.2);
        }

        .quick-card-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 1.5rem;
        }

        .quick-card-content {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .quick-stat {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: linear-gradient(135deg, #f8f9fa, #ffffff);
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .quick-stat:hover {
            background: linear-gradient(135deg, #e9ecef, #f8f9fa);
            transform: translateX(5px);
        }

        .quick-stat i {
            font-size: 1.5rem;
            color: var(--primary-dark);
        }

        .quick-stat strong {
            color: var(--primary-dark);
        }

        /* Materiales */
        .materials-section {
            margin-bottom: 1.5rem;
        }

        .materials-section:last-child {
            margin-bottom: 0;
        }

        .materials-label {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1rem;
            color: var(--dark);
            margin-bottom: 0.75rem;
        }

        .materials-list {
            list-style: none;
            padding-left: 2rem;
            margin: 0;
        }

        .materials-list li {
            padding: 0.5rem 0;
            color: var(--gray-medium);
            position: relative;
        }

        .materials-list li::before {
            content: "•";
            position: absolute;
            left: -1rem;
            color: var(--primary-dark);
            font-weight: bold;
        }

        /* Metodología */
        .methodology-steps {
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .method-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            flex: 1;
            min-width: 80px;
        }

        .method-step-number {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary-dark), var(--primary-light));
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            margin-bottom: 0.5rem;
            box-shadow: 0 3px 10px rgba(44,95,102,0.3);
        }

        .method-step-content strong {
            display: block;
            font-size: 0.95rem;
            color: var(--dark);
            margin-bottom: 0.25rem;
        }

        .method-step-content span {
            font-size: 0.8rem;
            color: var(--gray-medium);
        }

        .method-arrow {
            color: var(--primary-light);
            font-size: 1.5rem;
            font-weight: bold;
        }

        /* ===== SECCIÓN: CONSEJOS DE ÉXITO ===== */
        .success-tips-section {
            max-width: 1400px;
            margin: 0 auto 3rem;
            padding: 0 2rem;
        }

        .tips-header {
            background: linear-gradient(135deg, #FFC107, #FFD54F);
            color: var(--dark);
            padding: 2.5rem;
            border-radius: 20px;
            margin-bottom: 2rem;
            display: flex;
            align-items: center;
            gap: 2rem;
            box-shadow: 0 8px 30px rgba(255,193,7,0.3);
        }

        .tips-icon {
            width: 80px;
            height: 80px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            color: #FFC107;
            flex-shrink: 0;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .tips-title {
            font-size: 2rem;
            font-weight: 800;
            margin: 0 0 0.5rem 0;
        }

        .tips-subtitle {
            font-size: 1.1rem;
            margin: 0;
            opacity: 0.9;
        }

        .tips-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        .tip-card {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            box-shadow: 0 6px 25px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
            border: 2px solid transparent;
            border-top: 4px solid var(--warning);
        }

        .tip-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 35px rgba(0,0,0,0.12);
            border-color: var(--warning);
        }

        .tip-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #FFC107, #FFD54F);
            color: white;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            margin-bottom: 1rem;
            box-shadow: 0 4px 12px rgba(255,193,7,0.3);
        }

        .tip-title {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 0.75rem;
        }

        .tip-description {
            font-size: 0.95rem;
            color: var(--gray-medium);
            line-height: 1.6;
            margin: 0;
        }

        /* ===== SECCIÓN: APOYO Y RECURSOS ===== */
        .support-section {
            max-width: 1400px;
            margin: 0 auto 4rem;
            padding: 0 2rem;
        }

        .support-header {
            background: linear-gradient(135deg, var(--primary-dark), var(--dark));
            color: white;
            padding: 3rem;
            border-radius: 25px;
            margin-bottom: 2.5rem;
            display: flex;
            align-items: center;
            gap: 2rem;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            position: relative;
            overflow: hidden;
        }

        .support-header::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -10%;
            width: 400px;
            height: 400px;
            background: radial-gradient(circle, rgba(232,162,184,0.2) 0%, transparent 70%);
            border-radius: 50%;
        }

        .support-icon-large {
            width: 90px;
            height: 90px;
            background: rgba(255,255,255,0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            flex-shrink: 0;
            backdrop-filter: blur(10px);
            border: 3px solid rgba(255,255,255,0.3);
            position: relative;
            z-index: 1;
        }

        .support-header-content {
            position: relative;
            z-index: 1;
        }

        .support-title {
            font-size: 2.2rem;
            font-weight: 800;
            margin: 0 0 0.5rem 0;
            color: var(--primary-light);
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .support-subtitle {
            font-size: 1.2rem;
            margin: 0;
            opacity: 0.95;
        }

        .support-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 2rem;
        }

        .support-card {
            background: white;
            border-radius: 20px;
            padding: 2.5rem;
            box-shadow: 0 8px 30px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
            border: 2px solid transparent;
            position: relative;
        }

        .support-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 45px rgba(0,0,0,0.15);
            border-color: var(--primary-light);
        }

        .support-card-badge {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: linear-gradient(135deg, var(--success), #66bb6a);
            color: white;
            padding: 0.4rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
            box-shadow: 0 2px 8px rgba(76,175,80,0.3);
        }

        .support-card-icon {
            width: 70px;
            height: 70px;
            background: linear-gradient(135deg, var(--primary-dark), var(--primary-light));
            color: white;
            border-radius: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 6px 20px rgba(44,95,102,0.3);
        }

        .support-card-title {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 1rem;
        }

        .support-card-description {
            font-size: 1rem;
            color: var(--gray-medium);
            line-height: 1.7;
            margin-bottom: 1.5rem;
        }

        .support-card-features {
            display: flex;
            flex-wrap: wrap;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
        }

        .feature-tag {
            padding: 0.5rem 1rem;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 20px;
            font-size: 0.85rem;
            color: var(--dark);
            border: 1px solid var(--gray-light);
        }

        .support-card-button {
            width: 100%;
            padding: 1rem;
            background: linear-gradient(135deg, var(--primary-dark), var(--primary-light));
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .support-card-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(44,95,102,0.4);
        }

        .support-card-contact {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .contact-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: linear-gradient(135deg, #f8f9fa, #ffffff);
            border-radius: 10px;
        }

        .contact-item i {
            font-size: 1.3rem;
            color: var(--primary-dark);
        }

        .resources-list {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .resource-link {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: linear-gradient(135deg, #f8f9fa, #ffffff);
            border-radius: 10px;
            text-decoration: none;
            color: var(--dark);
            transition: all 0.3s ease;
            border: 1px solid transparent;
        }

        .resource-link:hover {
            background: linear-gradient(135deg, #e9ecef, #f8f9fa);
            border-color: var(--primary-light);
            transform: translateX(5px);
            color: var(--primary-dark);
        }

        .resource-link i {
            font-size: 1.3rem;
            color: var(--primary-dark);
        }

        /* ===== RESPONSIVE PARA NUEVAS SECCIONES ===== */
        @media (max-width: 992px) {
            .info-grid {
                grid-template-columns: 1fr;
            }

            .quick-view-grid {
                grid-template-columns: 1fr;
            }

            .methodology-steps {
                flex-direction: column;
            }

            .method-arrow {
                transform: rotate(90deg);
            }

            .tips-header {
                flex-direction: column;
                text-align: center;
            }

            .tips-grid {
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            }

            .support-header {
                flex-direction: column;
                text-align: center;
            }

            .support-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .objective-item,
            .deliverable-item {
                flex-direction: column;
                text-align: center;
            }

            .methodology-steps {
                gap: 1rem;
            }

            .tips-title {
                font-size: 1.5rem;
            }

            .support-title {
                font-size: 1.7rem;
            }
        }

        /* ===== RESPONSIVE ===== */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }

            .dashboard-welcome {
                padding: 2rem 1.5rem;
            }

            .welcome-greeting {
                font-size: 1.8rem;
            }

            .progress-grid {
                grid-template-columns: 1fr;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .modules-grid {
                grid-template-columns: 1fr;
            }

            .modules-title {
                font-size: 2rem;
            }

            .chatbot-trigger {
                bottom: 80px;
                right: 20px;
                width: 60px;
                height: 60px;
                font-size: 1.7rem;
            }
        }

        
        /* ===== MEJORAS RESPONSIVE ADICIONALES ===== */
        @media (max-width: 768px) {
            /* Container principal */
            .dashboard-container {
                padding: 0 1rem;
                margin: 1rem auto;
            }
            
            /* Hero section más compacto */
            .next-step-hero {
                padding: 1.5rem;
                margin-bottom: 1.5rem;
            }
            
            .next-step-title {
                font-size: 1.2rem;
            }
            
            .next-step-btn {
                padding: 0.85rem 1.5rem;
                font-size: 1rem;
                width: 100%;
            }
            
            /* Progress card */
            .progress-circle-container svg {
                width: 140px;
                height: 140px;
            }
            
            .progress-percentage {
                font-size: 1.8rem;
            }
            
            /* Stats grid */
            .stat-item {
                padding: 1.25rem;
            }
            
            .stat-number {
                font-size: 1.8rem;
            }
            
            /* Módulos */
            .module-card {
                padding: 1.5rem;
            }
            
            .module-title {
                font-size: 1.3rem;
            }
            
            /* Course info sections */
            .course-info-section,
            .quick-overview-section,
            .success-tips-section,
            .support-section {
                padding: 1.5rem;
                margin-bottom: 1.5rem;
            }
            
            /* Tips grid */
            .tips-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            
            /* Quick overview grid */
            .quick-overview-grid {
                grid-template-columns: 1fr;
            }
            
            /* Support grid */
            .support-grid {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }
            
            /* Collapse buttons */
            .collapse-toggle-btn {
                font-size: 0.9rem;
                padding: 0.75rem 1rem;
            }
            
            /* Header */
            .logo-section h1 {
                font-size: 1.1rem;
            }
            
            .user-badge {
                padding: 0.5rem 0.9rem;
                font-size: 0.85rem;
            }
            
            .btn-logout {
                padding: 0.4rem 0.8rem;
                font-size: 0.85rem;
            }
            
            /* Modales en móvil */
            .modal-dialog {
                margin: 0.5rem;
                max-width: calc(100% - 1rem);
            }
            
            .onboarding-step {
                padding: 1.25rem;
            }
            
            .roadmap-visual {
                flex-direction: column;
                gap: 0.5rem;
            }
            
            .roadmap-step {
                width: 60px;
                height: 60px;
                font-size: 1.1rem;
            }
            
            .roadmap-arrow {
                transform: rotate(90deg);
                font-size: 1.5rem;
            }
            
            /* Session summary */
            .session-stats {
                grid-template-columns: 1fr;
                padding: 1rem;
                gap: 0.75rem;
            }
            
            /* Toasts en móvil */
            .toast-container {
                top: 70px;
                right: 0.5rem;
                left: 0.5rem;
            }
            
            .toast {
                min-width: auto;
                width: 100%;
            }
        }
        
        /* Para pantallas muy pequeñas (<400px) */
        @media (max-width: 400px) {
            .dashboard-welcome {
                padding: 1.5rem 1rem;
            }
            
            .welcome-greeting {
                font-size: 1.5rem;
            }
            
            .next-step-btn {
                font-size: 0.9rem;
                padding: 0.75rem 1.25rem;
            }
            
            .module-card {
                padding: 1.25rem;
            }
            
            .progress-circle-container svg {
                width: 120px;
                height: 120px;
            }
            
            .mentor-float-button {
                width: 52px;
                height: 52px;
                bottom: 3.5rem;
            }
            
            .mentor-chat-container {
                height: calc(100vh - 140px);
                bottom: 3.5rem;
            }
        }


        /* ===== TOAST NOTIFICATIONS ===== */
        .toast-container {
            position: fixed;
            top: 90px;
            right: 30px;
            z-index: 1040;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .toast {
            background: white;
            padding: 1rem 1.5rem;
            border-radius: 12px;
            box-shadow: 0 6px 20px rgba(0,0,0,0.15);
            display: flex;
            align-items: center;
            gap: 1rem;
            min-width: 300px;
            animation: slideInRight 0.3s ease-out;
            border-left: 4px solid var(--success);
        }

        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .toast.error {
            border-left-color: var(--danger);
        }

        .toast.warning {
            border-left-color: var(--warning);
        }

        .toast.info {
            border-left-color: var(--info);
        }

        /* ===== FOOTER ===== */
        .footer {
            background: linear-gradient(135deg, var(--dark), var(--primary-dark));
            color: white;
            padding: 2rem 0;
            margin-top: 4rem;
            text-align: center;
        }

        .footer p {
            margin: 0;
            opacity: 0.9;
        }
    
        /* ===== ACORDEONES RETRÁCTILES BOOTSTRAP ===== */
        .collapse-toggle-btn {
            transition: all 0.3s ease;
            border: 2px solid var(--primary-dark);
        }

        .collapse-toggle-btn:hover {
            background: var(--primary-dark);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(44, 95, 102, 0.3);
        }

        .collapse-icon {
            transition: transform 0.3s ease;
        }

        .collapse-icon.rotated {
            transform: rotate(180deg);
        }

        .collapsible-section {
            margin-bottom: 2rem;
        }

        .collapsible-section .collapse {
            margin-top: 1rem;
        }

        /* ===== MODAL DE ONBOARDING ===== */
        .onboarding-modal .modal-content {
            border-radius: 20px;
            border: none;
            overflow: hidden;
        }

        .onboarding-header {
            background: linear-gradient(135deg, var(--primary-dark), var(--primary-light));
            color: white;
            padding: 2rem;
            text-align: center;
        }

        .onboarding-step {
            padding: 2rem;
            min-height: 300px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .onboarding-icon {
            font-size: 4rem;
            margin-bottom: 1.5rem;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .roadmap-visual {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1rem;
            margin: 2rem 0;
        }

        .roadmap-step {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: var(--gray-light);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            border: 3px solid var(--primary-dark);
        }

        .roadmap-arrow {
            font-size: 2rem;
            color: var(--primary-light);
        }

        .onboarding-progress {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin-top: 1.5rem;
        }

        .progress-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--gray-light);
            transition: all 0.3s ease;
        }

        .progress-dot.active {
            background: var(--primary-dark);
            width: 30px;
            border-radius: 6px;
        }

        /* ===== MODAL DE SESIÓN COMPLETADA ===== */
        .session-summary-modal .modal-content {
            border-radius: 20px;
            border: none;
        }

        .session-header {
            background: linear-gradient(135deg, var(--success), #45a049);
            color: white;
            padding: 2rem;
            text-align: center;
            border-radius: 20px 20px 0 0;
        }

        .session-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1.5rem;
            padding: 2rem;
        }

        .session-stat {
            text-align: center;
            padding: 1rem;
            background: var(--gray-light);
            border-radius: 12px;
        }

        .session-stat-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .session-stat-number {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary-dark);
        }

        .session-stat-label {
            font-size: 0.85rem;
            color: var(--gray-medium);
        }

        .concepts-list {
            background: var(--gray-light);
            padding: 1.5rem;
            border-radius: 12px;
            margin: 1rem 0;
        }

        .concepts-list h6 {
            color: var(--primary-dark);
            font-weight: bold;
            margin-bottom: 1rem;
        }

        .concepts-list ul {
            list-style: none;
            padding: 0;
        }

        .concepts-list li {
            padding: 0.5rem 0;
            border-bottom: 1px solid rgba(0,0,0,0.05);
        }

        .concepts-list li:last-child {
            border-bottom: none;
        }

        .concepts-list li::before {
            content: '✓ ';
            color: var(--success);
            font-weight: bold;
            margin-right: 0.5rem;
        }

        .motivational-message {
            background: linear-gradient(135deg, var(--primary-dark), var(--primary-light));
            color: white;
            padding: 1.5rem;
            border-radius: 12px;
            margin: 1rem 0;
            text-align: center;
            font-size: 1.1rem;
            font-weight: 500;
        }

        /* ===== RESPONSIVE MODALS ===== */
        @media (max-width: 768px) {
            .onboarding-modal .modal-dialog,
            .session-summary-modal .modal-dialog {
                margin: 0.5rem;
                max-width: calc(100% - 1rem);
            }

            .onboarding-step {
                padding: 1.5rem;
                min-height: 250px;
            }

            .onboarding-icon {
                font-size: 3rem;
            }

            .session-stats {
                grid-template-columns: 1fr;
                gap: 1rem;
                padding: 1.5rem;
            }

            .roadmap-visual {
                flex-direction: column;
            }

            .roadmap-arrow {
                transform: rotate(90deg);
            }
        }

        /* ===== AJUSTES RESPONSIVE PARA ACORDEONES ===== */
        @media (max-width: 768px) {
            .dashboard-welcome {
                padding: 2rem 1.5rem;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .collapse-text-mobile {
                display: inline;
            }

            .collapse-text-desktop {
                display: none;
            }
        }

        @media (min-width: 769px) {
            .collapse-text-mobile {
                display: none;
            }

            .collapse-text-desktop {
                display: inline;
            }
        }

        /* ===== HERO SECTION MEJORADO ===== */
        .next-step-hero {
            background: linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05));
            padding: 2rem;
            border-radius: 16px;
            margin-bottom: 2rem;
            border: 2px solid rgba(255,255,255,0.2);
            backdrop-filter: blur(10px);
        }

        .next-step-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: white;
        }

        .next-step-btn {
            padding: 1rem 2.5rem;
            font-size: 1.2rem;
            font-weight: 700;
            border-radius: 50px;
            box-shadow: 0 8px 24px rgba(0,0,0,0.3);
            transition: all 0.3s ease;
        }

        .next-step-btn:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 32px rgba(0,0,0,0.4);
        }

        .progress-indicator-inline {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
            color: rgba(255,255,255,0.9);
            margin-top: 1rem;
        }
</style>
</head>
<body>

    <!-- HEADER -->
    <header class="header-uah">
        <div class="header-content">
            <div class="logo-section">
                <i class="bi bi-palette-fill" style="font-size: 2rem; color: var(--primary-light);"></i>
                <h1>Dibujo Anatómico UAH</h1>
            </div>
            <div class="user-section">
                <div class="user-badge">
                    <div class="user-avatar" id="userAvatar">?</div>
                    <span id="userName">Usuario</span>
                </div>
                <button class="btn btn-logout" onclick="logout()">
                    <i class="bi bi-box-arrow-right me-1"></i>
                    Cerrar Sesión
                </button>
            </div>
        </div>
    </header>

    <!-- DASHBOARD DEL ESTUDIANTE -->
    <div class="dashboard-container fade-in">
        <!-- Bienvenida -->
        <div class="dashboard-welcome">
            <div class="welcome-content">
                <h2 class="welcome-greeting">¡Hola, <span id="welcomeName">Estudiante</span>!</h2>
                <p class="welcome-subtitle">Continúa tu camino en el aprendizaje del dibujo anatómico</p>
            </div>
        </div>

        <!-- Grid de Progreso -->
        <div class="progress-grid">
            <!-- Tarjeta de Progreso Circular -->
            <div class="progress-card fade-in-up">
                <div class="progress-circle-container">
                    <div class="progress-circle">
                        <svg width="180" height="180">
                            <circle cx="90" cy="90" r="75" fill="none" stroke="#e9ecef" stroke-width="12"/>
                            <circle id="progressCircle" cx="90" cy="90" r="75" fill="none" 
                                    stroke="url(#gradient)" stroke-width="12" 
                                    stroke-linecap="round" stroke-dasharray="471" stroke-dashoffset="471"/>
                            <defs>
                                <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:#2c5f66;stop-opacity:1" />
                                    <stop offset="100%" style="stop-color:#e8a2b8;stop-opacity:1" />
                                </linearGradient>
                            </defs>
                        </svg>
                        <div class="progress-circle-text">
                            <span class="progress-percentage" id="overallProgress">0%</span>
                        </div>
                    </div>
                </div>
                <div class="progress-label">Progreso General</div>
                <div class="progress-details" id="progressDetails">
                    Comienza tu primera lección para ver tu progreso
                </div>
            </div>

            <!-- Tarjeta de Estadísticas -->
            <div class="stats-card fade-in-up" style="animation-delay: 0.1s;">
                <div class="stats-header">
                    <div class="stats-icon">
                        <i class="bi bi-graph-up"></i>
                    </div>
                    <h3 class="stats-title">Tus Estadísticas</h3>
                </div>
                <div class="stats-grid">
                    <div class="stat-item">
                        <span class="stat-number" id="completedModules">0</span>
                        <span class="stat-label">Módulos Completados</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" id="completedLessons">0</span>
                        <span class="stat-label">Lecciones Completadas</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" id="totalTimeSpent">0h</span>
                        <span class="stat-label">Tiempo de Estudio</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" id="currentStreak">0</span>
                        <span class="stat-label">Días de Racha</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Siguiente Tarea -->
<div class="next-task-section fade-in-up" style="animation-delay: 0.2s;">
    <div class="next-task-header">
        <div class="next-task-icon">
            <i class="bi bi-flag-fill"></i>
        </div>
        <h4 class="next-task-title">Tu Siguiente Paso</h4>
    </div>
    
    <!-- NUEVO CONTENIDO -->
    <div class="next-step-hero">
        <h5 class="next-step-title" id="nextStepText">Cargando...</h5>
        <button class="btn btn-light btn-lg next-step-btn" id="nextStepBtn" onclick="goToNextStep()">
            <i class="bi bi-play-circle me-2"></i>
            Comenzar
        </button>
        <div class="progress-indicator-inline" id="overallProgressInline">
            <i class="bi bi-graph-up"></i>
            <span>0% completado</span>
        </div>
    </div>
</div>

        <!-- Desglose por Módulos -->
        <div class="modules-breakdown-section fade-in-up" style="animation-delay: 0.3s;">
            <div class="section-header">
                <div class="section-icon">
                    <i class="bi bi-collection-fill"></i>
                </div>
                <h3 class="section-title">Desglose por Módulo</h3>
            </div>
            <div class="modules-breakdown-grid" id="moduleBreakdown">
                <!-- Se llenará dinámicamente -->
            </div>
        </div>

        <!-- SECCIÓN: INFORMACIÓN DEL CURSO -->
        <!-- Botón Toggle Acordeón -->
        <div class="collapsible-section">
            <button class="btn collapse-toggle-btn w-100 mb-3" 
                    type="button" 
                    data-bs-toggle="collapse" 
                    data-bs-target="#collapseCourseInfo" 
                    aria-expanded="false" 
                    aria-controls="collapseCourseInfo"
                    onclick="toggleCollapseIcon(this)">
                <i class="bi bi-chevron-down me-2 collapse-icon"></i>
                <span class="collapse-text collapse-text-desktop">Ver más información del curso</span>
                <span class="collapse-text collapse-text-mobile">Más info</span>
            </button>
            
            <div class="collapse" id="collapseCourseInfo">
                <div class="course-info-section fade-in-up" style="animation-delay: 0.4s;">
            <div class="section-header">
                <div class="section-icon">
                    <i class="bi bi-info-circle-fill"></i>
                </div>
                <h3 class="section-title">Información del Curso</h3>
            </div>
            
            <div class="info-grid">
                <!-- Objetivos de Aprendizaje -->
                <div class="info-card-modern">
                    <div class="info-card-header">
                        <div class="info-card-icon" style="background: linear-gradient(135deg, #4CAF50, #66bb6a);">
                            <i class="bi bi-trophy-fill"></i>
                        </div>
                        <h4 class="info-card-title">Objetivos de Aprendizaje</h4>
                    </div>
                    <div class="info-card-body">
                        <div class="objective-item">
                            <div class="objective-number">1</div>
                            <div class="objective-text">
                                <strong>Observación Directa</strong>
                                <p>Aplicar técnicas de observación para capturar línea de acción y proporciones</p>
                            </div>
                        </div>
                        <div class="objective-item">
                            <div class="objective-number">2</div>
                            <div class="objective-text">
                                <strong>Estructura Anatómica</strong>
                                <p>Analizar y representar la estructura ósea y muscular básica del cuerpo</p>
                            </div>
                        </div>
                        <div class="objective-item">
                            <div class="objective-number">3</div>
                            <div class="objective-text">
                                <strong>Figura Completa</strong>
                                <p>Crear representaciones completas integrando gesto, anatomía y valores tonales</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Entregables Totales -->
                <div class="info-card-modern">
                    <div class="info-card-header">
                        <div class="info-card-icon" style="background: linear-gradient(135deg, #2196F3, #42a5f5);">
                            <i class="bi bi-clipboard-check-fill"></i>
                        </div>
                        <h4 class="info-card-title">Entregables del Curso</h4>
                    </div>
                    <div class="info-card-body">
                        <div class="deliverable-item">
                            <div class="deliverable-icon">
                                <i class="bi bi-pencil-fill"></i>
                            </div>
                            <div class="deliverable-content">
                                <span class="deliverable-number">23</span>
                                <span class="deliverable-label">Dibujos Progresivos</span>
                                <p class="deliverable-desc">Ejercicios prácticos de cada lección</p>
                            </div>
                        </div>
                        <div class="deliverable-item">
                            <div class="deliverable-icon">
                                <i class="bi bi-list-check"></i>
                            </div>
                            <div class="deliverable-content">
                                <span class="deliverable-number">10</span>
                                <span class="deliverable-label">Evaluaciones Formativas</span>
                                <p class="deliverable-desc">Auto-evaluaciones de progreso</p>
                            </div>
                        </div>
                        <div class="deliverable-item">
                            <div class="deliverable-icon">
                                <i class="bi bi-star-fill"></i>
                            </div>
                            <div class="deliverable-content">
                                <span class="deliverable-number">1</span>
                                <span class="deliverable-label">Proyecto Final</span>
                                <p class="deliverable-desc">Figura completa en papel 1/4 mercurio</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- SECCIÓN: VISTA RÁPIDA Y PREPARACIÓN -->
        <div class="quick-view-section fade-in-up" style="animation-delay: 0.5s;">
            <div class="section-header">
                <div class="section-icon">
                    <i class="bi bi-lightning-charge-fill"></i>
                </div>
                <h3 class="section-title">Vista Rápida y Preparación</h3>
            </div>
            
            <div class="quick-view-grid">
                <!-- Duración y Estructura -->
                <div class="quick-card">
                    <div class="quick-card-icon" style="background: linear-gradient(135deg, #FF9800, #FFB74D);">
                        <i class="bi bi-calendar-week"></i>
                    </div>
                    <h5 class="quick-card-title">Duración y Estructura</h5>
                    <div class="quick-card-content">
                        <div class="quick-stat">
                            <i class="bi bi-clock-fill"></i>
                            <span><strong>12 días</strong> de aprendizaje</span>
                        </div>
                        <div class="quick-stat">
                            <i class="bi bi-hourglass-split"></i>
                            <span><strong>12-14 horas</strong> totales</span>
                        </div>
                        <div class="quick-stat">
                            <i class="bi bi-book-fill"></i>
                            <span><strong>10 lecciones</strong> estructuradas</span>
                        </div>
                        <div class="quick-stat">
                            <i class="bi bi-boxes"></i>
                            <span><strong>3 módulos</strong> secuenciales</span>
                        </div>
                    </div>
                </div>

                <!-- Materiales Necesarios -->
                <div class="quick-card">
                    <div class="quick-card-icon" style="background: linear-gradient(135deg, #E91E63, #F06292);">
                        <i class="bi bi-palette-fill"></i>
                    </div>
                    <h5 class="quick-card-title">Materiales Necesarios</h5>
                    <div class="quick-card-content">
                        <div class="materials-section">
                            <strong class="materials-label">
                                <i class="bi bi-check-circle-fill text-success"></i> Esenciales:
                            </strong>
                            <ul class="materials-list">
                                <li>Lápiz grafito HB y 2B</li>
                                <li>Papel block croquis</li>
                                <li>Borrador blanco</li>
                                <li>Sacapuntas</li>
                            </ul>
                        </div>
                        <div class="materials-section">
                            <strong class="materials-label">
                                <i class="bi bi-star-fill text-warning"></i> Para proyecto final:
                            </strong>
                            <ul class="materials-list">
                                <li>Papel 1/4 mercurio</li>
                                <li>Carboncillo (opcional)</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Metodología -->
                <div class="quick-card">
                    <div class="quick-card-icon" style="background: linear-gradient(135deg, #9C27B0, #BA68C8);">
                        <i class="bi bi-diagram-3-fill"></i>
                    </div>
                    <h5 class="quick-card-title">Cómo Funciona</h5>
                    <div class="quick-card-content">
                        <div class="methodology-steps">
                            <div class="method-step">
                                <div class="method-step-number">1</div>
                                <div class="method-step-content">
                                    <strong>Aprende</strong>
                                    <span>Contenido teórico y visual</span>
                                </div>
                            </div>
                            <div class="method-arrow">→</div>
                            <div class="method-step">
                                <div class="method-step-number">2</div>
                                <div class="method-step-content">
                                    <strong>Practica</strong>
                                    <span>Ejercicios guiados</span>
                                </div>
                            </div>
                            <div class="method-arrow">→</div>
                            <div class="method-step">
                                <div class="method-step-number">3</div>
                                <div class="method-step-content">
                                    <strong>Evalúa</strong>
                                    <span>Auto-evaluación</span>
                                </div>
                            </div>
                            <div class="method-arrow">→</div>
                            <div class="method-step">
                                <div class="method-step-number">4</div>
                                <div class="method-step-content">
                                    <strong>Sube</strong>
                                    <span>Comparte tu trabajo</span>
                                </div>
                            </div>
                            <div class="method-arrow">→</div>
                            <div class="method-step">
                                <div class="method-step-number">5</div>
                                <div class="method-step-content">
                                    <strong>Avanza</strong>
                                    <span>Desbloquea siguiente</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- SECCIÓN: CONSEJOS DE ÉXITO -->
        <div class="success-tips-section fade-in-up" style="animation-delay: 0.6s;">
            <div class="tips-header">
                <div class="tips-icon">
                    <i class="bi bi-lightbulb-fill"></i>
                </div>
                <div class="tips-title-content">
                    <h3 class="tips-title">Consejos para Aprovechar el Curso</h3>
                    <p class="tips-subtitle">Recomendaciones basadas en estudiantes exitosos</p>
                </div>
            </div>
            <div class="tips-grid">
                <div class="tip-card">
                    <div class="tip-icon">
                        <i class="bi bi-calendar-check"></i>
                    </div>
                    <h5 class="tip-title">Practica Diariamente</h5>
                    <p class="tip-description">Dedica 15-30 minutos cada día. La constancia supera la intensidad esporádica.</p>
                </div>
                <div class="tip-card">
                    <div class="tip-icon">
                        <i class="bi bi-graph-up-arrow"></i>
                    </div>
                    <h5 class="tip-title">Progreso > Perfección</h5>
                    <p class="tip-description">Enfócate en mejorar, no en ser perfecto. Cada trazo es aprendizaje.</p>
                </div>
                <div class="tip-card">
                    <div class="tip-icon">
                        <i class="bi bi-cloud-upload"></i>
                    </div>
                    <h5 class="tip-title">Sube Tus Ejercicios</h5>
                    <p class="tip-description">Comparte aunque no estén "perfectos". El feedback es invaluable.</p>
                </div>
                <div class="tip-card">
                    <div class="tip-icon">
                        <i class="bi bi-robot"></i>
                    </div>
                    <h5 class="tip-title">Usa el Mentor IA</h5>
                    <p class="tip-description">Disponible 24/7 para dudas técnicas y apoyo emocional. ¡No dudes en preguntar!</p>
                </div>
                <div class="tip-card">
                    <div class="tip-icon">
                        <i class="bi bi-arrow-clockwise"></i>
                    </div>
                    <h5 class="tip-title">Repasa Lecciones</h5>
                    <p class="tip-description">Vuelve a las lecciones anteriores. La repetición refuerza el aprendizaje.</p>
                </div>
                <div class="tip-card">
                    <div class="tip-icon">
                        <i class="bi bi-emoji-smile"></i>
                    </div>
                    <h5 class="tip-title">Disfruta el Proceso</h5>
                    <p class="tip-description">El dibujo es un viaje, no un destino. Celebra cada pequeño avance.</p>
                </div>
            </div>
        </div>

        <!-- SECCIÓN: APOYO Y RECURSOS -->
        <div class="support-section fade-in-up" style="animation-delay: 0.7s;">
            <div class="support-header">
                <div class="support-icon-large">
                    <i class="bi bi-people-fill"></i>
                </div>
                <div class="support-header-content">
                    <h3 class="support-title">Estás Acompañado/a en Todo Momento</h3>
                    <p class="support-subtitle">Múltiples recursos de apoyo disponibles para tu éxito</p>
                </div>
            </div>
            
            <div class="support-grid">
                <!-- Mentor IA -->
                <div class="support-card mentor-card">
                    <div class="support-card-badge">Disponible 24/7</div>
                    <div class="support-card-icon">
                        <i class="bi bi-robot"></i>
                    </div>
                    <h4 class="support-card-title">Mentor Anatómico IA</h4>
                    <p class="support-card-description">
                        Tu asistente inteligente para dudas técnicas, apoyo emocional y orientación del sistema.
                    </p>
                    <div class="support-card-features">
                        <div class="feature-tag">💙 Apoyo Emocional</div>
                        <div class="feature-tag">🎨 Dudas Técnicas</div>
                        <div class="feature-tag">📚 Guía del Sistema</div>
                    </div>
                    <button class="support-card-button" onclick="document.getElementById('mentorFloatBtn').click()">
                        <i class="bi bi-chat-dots-fill me-2"></i>
                        Abrir Chat del Mentor
                    </button>
                </div>

                <!-- Instructor -->
                <div class="support-card">
                    <div class="support-card-icon">
                        <i class="bi bi-person-badge"></i>
                    </div>
                    <h4 class="support-card-title">Tu Instructor</h4>
                    <p class="support-card-description">
                        Joselyn Vizcarra<br>
                        <small style="opacity: 0.8;">Diplomado en Diseño Instruccional - U. de Chile</small>
                    </p>
                    <div class="support-card-contact">
                        <div class="contact-item">
                            <i class="bi bi-envelope-fill"></i>
                            <span>Consultas por email</span>
                        </div>
                        <div class="contact-item">
                            <i class="bi bi-clock-fill"></i>
                            <span>Respuesta en 24-48 hrs</span>
                        </div>
                    </div>
                </div>

                <!-- Recursos Extra -->
                <div class="support-card">
                    <div class="support-card-icon">
                        <i class="bi bi-bookmarks-fill"></i>
                    </div>
                    <h4 class="support-card-title">Recursos Complementarios</h4>
                    <div class="resources-list">
                        <a href="#" class="resource-link">
                            <i class="bi bi-images"></i>
                            <span>Galería de Referencias Anatómicas</span>
                        </a>
                        <a href="#" class="resource-link">
                            <i class="bi bi-question-circle"></i>
                            <span>Preguntas Frecuentes (FAQ)</span>
                        </a>
                        <a href="#" class="resource-link">
                            <i class="bi bi-book"></i>
                            <span>Glosario de Términos Anatómicos</span>
                        </a>
                        <a href="#" class="resource-link">
                            <i class="bi bi-film"></i>
                            <span>Videos Demostrativos</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- SECCIÓN DE MÓDULOS -->
    <section class="modules-section">
        <div class="modules-header fade-in-up">
            <h2 class="modules-title">Módulos del Curso</h2>
            <p class="modules-subtitle">Explora cada módulo y desarrolla tus habilidades paso a paso</p>
        </div>
        <div class="modules-grid" id="modulesGrid">
            <!-- Se llenará dinámicamente -->
        </div>
    </section>

    <!-- MENTOR ANATÓMICO - SISTEMA COMPLETO -->
        <!-- Backdrop para cerrar mentor haciendo clic fuera -->
    <div class="mentor-backdrop" id="mentorBackdrop"></div>

    <button class="mentor-float-button" id="mentorFloatBtn" aria-label="Abrir Mentor Virtual">
        <i class="bi bi-chat-dots-fill"></i>
        <span class="mentor-badge">!</span>
    </button>

    <div class="mentor-chat-container" id="mentorChatContainer">
        <div class="mentor-chat-header">
            <div class="mentor-chat-header-info">
                <div class="mentor-avatar">
                    🎨
                </div>
                <div class="mentor-status">
                    <div class="mentor-name">Mentor Anatómico</div>
                    <div class="mentor-online">
                        <span class="status-dot"></span>
                        En línea
                    </div>
                </div>
            </div>
            <button class="mentor-close-btn" id="mentorCloseBtn" aria-label="Cerrar chat">
                <i class="bi bi-x-lg"></i>
            </button>
        </div>

        <div class="mentor-chat-messages" id="mentorMessages">
            <!-- Los mensajes se agregan dinámicamente aquí -->
        </div>

        <div class="typing-indicator" id="typingIndicator">
            <span class="typing-dot"></span>
            <span class="typing-dot"></span>
            <span class="typing-dot"></span>
        </div>

        <div class="mentor-chat-input-container">
            <textarea 
                class="mentor-chat-input" 
                id="mentorInput" 
                placeholder="Escribe tu pregunta o duda..."
                rows="1"
            ></textarea>
            <button class="mentor-send-btn" id="mentorSendBtn" aria-label="Enviar mensaje">
                <i class="bi bi-send-fill"></i>
            </button>
        </div>
    </div>

    <!-- OVERLAY DE CARGA -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
        <p class="loading-text" id="loadingText">Cargando...</p>
    </div>

    <!-- FOOTER -->
    <footer class="footer">
        <div class="container">
            <p>© 2025 Universidad Alberto Hurtado - Curso de Dibujo Anatómico</p>
            <p style="margin-top: 0.5rem; font-size: 0.9rem;">
                Proyecto de Diplomado de Diseño Instruccional UCH - Diseñado por Joselyn Vizcarra
            </p>
        </div>
    </footer>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="auth.js"></script>
    <script>
        // ===== DATOS DE MÓDULOS =====
        const modulesData = [
            {
                id: 1,
                number: "Módulo 1",
                title: "Fundamentos del Dibujo Anatómico",
                subtitle: "Bases esenciales",
                description: "Introducción a las proporciones, estructura ósea básica y técnicas fundamentales de dibujo del cuerpo humano.",
                duration: "4 semanas",
                lessons: 12,
                hours: "20 horas",
                exercises: "15 ejercicios",
                evaluations: "3 evaluaciones",
                difficulty: "Inicial",
                url: "module1.html"
            },
            {
                id: 2,
                number: "Módulo 2",
                title: "Anatomía Muscular y Movimiento",
                subtitle: "Profundización anatómica",
                description: "Estudio detallado de la musculatura, sus funciones y cómo representar el cuerpo en movimiento.",
                duration: "5 semanas",
                lessons: 15,
                hours: "25 horas",
                exercises: "20 ejercicios",
                evaluations: "4 evaluaciones",
                difficulty: "Intermedio",
                url: "module2.html"
            },
            {
                id: 3,
                number: "Módulo 3",
                title: "Composición y Expresión Artística",
                subtitle: "Maestría creativa",
                description: "Técnicas avanzadas de composición, expresión emocional y desarrollo de estilo personal en el dibujo anatómico.",
                duration: "6 semanas",
                lessons: 18,
                hours: "30 horas",
                exercises: "25 ejercicios",
                evaluations: "5 evaluaciones",
                difficulty: "Avanzado",
                url: "module3.html"
            }
        ];

        // ===== FUNCIONES DE UTILIDAD =====
        function showLoading(show, text = 'Cargando...') {
            const overlay = document.getElementById('loadingOverlay');
            const loadingText = document.getElementById('loadingText');
            loadingText.textContent = text;
            
            if (show) {
                overlay.classList.add('show');
            } else {
                overlay.classList.remove('show');
            }
        }

        function showToast(message, type = 'success') {
            const container = document.getElementById('toastContainer');
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            
            const icons = {
                success: 'check-circle-fill',
                error: 'x-circle-fill',
                warning: 'exclamation-triangle-fill',
                info: 'info-circle-fill'
            };
            
            toast.innerHTML = `
                <i class="bi bi-${icons[type]}" style="font-size: 1.5rem; color: var(--${type === 'success' ? 'success' : type === 'error' ? 'danger' : type});"></i>
                <span>${message}</span>
            `;
            
            container.appendChild(toast);
            
            setTimeout(() => {
                toast.style.animation = 'slideInRight 0.3s ease-out reverse';
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        // ===== FUNCIONES DE AUTENTICACIÓN =====
        function isAuthenticated() {
            return localStorage.getItem('isAuthenticated') === 'true';
        }

        function getCurrentUser() {
            if (!isAuthenticated()) return null;
            try {
                return JSON.parse(localStorage.getItem('currentUser') || 'null');
            } catch (error) {
                console.error('Error parsing user data:', error);
                return null;
            }
        }

        function checkAuthentication() {
            if (!isAuthenticated()) {
                window.location.href = 'login.html';
                return false;
            }
            return true;
        }

        function logout() {
            saveProgress();
            localStorage.removeItem('currentUser');
            localStorage.removeItem('isAuthenticated');
            localStorage.removeItem('sessionStart');
            window.location.href = 'login.html';
        }

        // ===== FUNCIONES DE PROGRESO =====
        function getStudentProgress() {
            const currentUser = getCurrentUser();
            if (!currentUser) return null;
            
            const progressKey = `progress_${currentUser.username}`;
            try {
                const progress = JSON.parse(localStorage.getItem(progressKey) || 'null');
                if (!progress) {
                    return initializeProgress();
                }
                return progress;
            } catch (error) {
                console.error('Error parsing progress data:', error);
                return initializeProgress();
            }
        }

        function initializeProgress() {
            return {
                modules: {
                    1: { completed: false, progress: 0, timeSpent: 0, completedLessons: [] },
                    2: { completed: false, progress: 0, timeSpent: 0, completedLessons: [] },
                    3: { completed: false, progress: 0, timeSpent: 0, completedLessons: [] }
                },
                overallProgress: 0,
                totalTimeSpent: 0,
                lastActivity: new Date().toISOString()
            };
        }

        function saveProgress() {
            const currentUser = getCurrentUser();
            if (!currentUser) return;
            
            const progressKey = `progress_${currentUser.username}`;
            const progress = getStudentProgress();
            
            if (progress) {
                progress.lastActivity = new Date().toISOString();
                localStorage.setItem(progressKey, JSON.stringify(progress));
            }
        }

        function openChatbot() {
            window.open('chatbot.html', 'MentorAnatómico', 'width=400,height=600');
        }

        // ===== FUNCIONES DE PROGRESO - CORREGIDAS ===== 
        function calculateOverallProgress() {
            try {
                const progress = getStudentProgress();
                if (!progress || !progress.modules) {
                    console.log('ℹ️ Sin progreso disponible');
                    return 0;
                }
                
                // Calcular basado en lecciones completadas vs total de lecciones
                const modules = [1, 2, 3];
                const moduleLessonsCount = {1: 3, 2: 4, 3: 3}; // Lecciones por módulo
                
                let totalLessons = 0;
                let completedLessons = 0;
                
                modules.forEach(moduleNum => {
                    totalLessons += moduleLessonsCount[moduleNum];
                    const moduleData = progress.modules[moduleNum];
                    if (moduleData && Array.isArray(moduleData.completedLessons)) {
                        completedLessons += moduleData.completedLessons.length;
                    }
                });
                
                return totalLessons > 0 ? Math.round((completedLessons / totalLessons) * 100) : 0;
            } catch (error) {
                console.error('Error en calculateOverallProgress:', error);
                return 0;
            }
        }

        function countCompletedModules() {
            try {
                const progress = getStudentProgress();
                if (!progress || !progress.modules) return 0;
                
                // Un módulo está completo cuando todas sus lecciones están completadas
                const moduleLessonsCount = {1: 3, 2: 4, 3: 3};
                let completed = 0;
                
                for (let moduleId in moduleLessonsCount) {
                    const moduleData = progress.modules[moduleId];
                    if (moduleData && Array.isArray(moduleData.completedLessons)) {
                        if (moduleData.completedLessons.length === moduleLessonsCount[moduleId]) {
                            completed++;
                        }
                    }
                }
                
                return completed;
            } catch (error) {
                console.error('Error en countCompletedModules:', error);
                return 0;
            }
        }

        function countCompletedLessons() {
            try {
                const progress = getStudentProgress();
                if (!progress || !progress.modules) return 0;
                
                let total = 0;
                Object.values(progress.modules).forEach(moduleData => {
                    if (moduleData && Array.isArray(moduleData.completedLessons)) {
                        total += moduleData.completedLessons.length;
                    }
                });
                
                return total;
            } catch (error) {
                console.error('Error en countCompletedLessons:', error);
                return 0;
            }
        }

        function formatTimeSpent(minutes) {
            if (!minutes || minutes === 0) return '0h';
            const hours = Math.floor(minutes / 60);
            const mins = minutes % 60;
            if (mins > 0) {
                return `${hours}h ${mins}m`;
            }
            return `${hours}h`;
        }

        function calculateStreak() {
            try {
                const progress = getStudentProgress();
                if (!progress || !progress.lastActivity) return 0;
                
                const lastActivity = new Date(progress.lastActivity);
                const today = new Date();
                const diffDays = Math.floor((today - lastActivity) / (1000 * 60 * 60 * 24));
                
                return diffDays <= 1 ? 1 : 0;
            } catch (error) {
                console.error('Error en calculateStreak:', error);
                return 0;
            }
        }

        // ===== ACTUALIZACIÓN DE INTERFAZ =====
        function updateUserInterface() {
            const user = getCurrentUser();
            if (!user) {
                console.error('❌ No hay usuario en updateUserInterface');
                return;
            }

            console.log('🔄 Actualizando interfaz para:', user.username);

            // Actualizar nombre de usuario
            const fullName = user.fullName || user.name || user.username;
            const firstName = fullName.split(' ')[0];
            
            const userNameEl = document.getElementById('userName');
            const welcomeNameEl = document.getElementById('welcomeName');
            const userAvatarEl = document.getElementById('userAvatar');
            
            if (userNameEl) userNameEl.textContent = fullName;
            if (welcomeNameEl) welcomeNameEl.textContent = firstName;
            if (userAvatarEl) userAvatarEl.textContent = firstName.charAt(0).toUpperCase();

            // Actualizar todas las secciones
            try {
                updateProgressCircle();
                updateStatistics();
                updateNextTask();
                updateModulesBreakdown();
                console.log('✅ Interfaz actualizada correctamente');
            } catch (error) {
                console.error('❌ Error actualizando interfaz:', error);
            }
        }

        function updateProgressCircle() {
            try {
                const progress = calculateOverallProgress();
                const circle = document.getElementById('progressCircle');
                const progressText = document.getElementById('overallProgress');
                const detailsText = document.getElementById('progressDetails');

                if (!circle || !progressText) {
                    console.warn('⚠️ Elementos de progreso no encontrados');
                    return;
                }

                // Animar círculo
                const circumference = 2 * Math.PI * 75;
                const offset = circumference - (progress / 100) * circumference;
                circle.style.strokeDashoffset = offset;

                // Animar número
                let current = 0;
                const target = progress;
                const increment = target / 50;
                const timer = setInterval(() => {
                    current += increment;
                    if (current >= target) {
                        current = target;
                        clearInterval(timer);
                    }
                    progressText.textContent = Math.round(current) + '%';
                }, 20);

                // Actualizar detalles
                if (detailsText) {
                    if (progress === 0) {
                        detailsText.textContent = 'Comienza tu primera lección para ver tu progreso';
                    } else if (progress === 100) {
                        detailsText.textContent = '¡Felicitaciones! Has completado todos los módulos del curso';
                    } else {
                        const completed = countCompletedModules();
                        const total = modulesData.length;
                        detailsText.textContent = `Has completado ${completed} de ${total} módulos. ¡Sigue así!`;
                    }
                }
            } catch (error) {
                console.error('❌ Error en updateProgressCircle:', error);
            }
        }

        function updateStatistics() {
            try {
                const progress = getStudentProgress();
                
                // Módulos completados
                const completed = countCompletedModules();
                animateCounter('completedModules', completed);

                // Lecciones completadas
                const lessons = countCompletedLessons();
                animateCounter('completedLessons', lessons);

                // Tiempo de estudio
                const timeSpent = progress?.totalTimeSpent || 0;
                const timeEl = document.getElementById('totalTimeSpent');
                if (timeEl) {
                    timeEl.textContent = formatTimeSpent(timeSpent);
                }

                // Racha
                const streak = calculateStreak();
                animateCounter('currentStreak', streak);
            } catch (error) {
                console.error('❌ Error en updateStatistics:', error);
            }
        }

        function animateCounter(elementId, target) {
            try {
                const element = document.getElementById(elementId);
                if (!element) {
                    console.warn(`⚠️ Elemento ${elementId} no encontrado`);
                    return;
                }
                
                let current = 0;
                const increment = target / 30;
                const timer = setInterval(() => {
                    current += increment;
                    if (current >= target) {
                        current = target;
                        clearInterval(timer);
                    }
                    element.textContent = Math.round(current);
                }, 30);
            } catch (error) {
                console.error(`Error en animateCounter para ${elementId}:`, error);
            }
        }

    

        function updateModulesBreakdown() {
            try {
                const container = document.getElementById('moduleBreakdown');
                if (!container) {
                    console.warn('⚠️ Elemento moduleBreakdown no encontrado');
                    return;
                }

                const progress = getStudentProgress();
                const moduleLessonsCount = {1: 3, 2: 4, 3: 3};
                
                container.innerHTML = modulesData.map(module => {
                    const moduleData = progress?.modules?.[module.id];
                    const totalLessons = moduleLessonsCount[module.id];
                    
                    let completedLessons = 0;
                    if (moduleData && Array.isArray(moduleData.completedLessons)) {
                        completedLessons = moduleData.completedLessons.length;
                    }

                    const percentage = Math.round((completedLessons / totalLessons) * 100);
                    const isModuleCompleted = completedLessons === totalLessons;

                    let status, statusIcon, statusColor, badgeClass;
                    
                    if (isModuleCompleted) {
                        status = 'Completado';
                        statusIcon = 'check-circle-fill';
                        statusColor = 'var(--success)';
                        badgeClass = 'badge-completed';
                    } else if (completedLessons > 0) {
                        status = 'En Progreso';
                        statusIcon = 'clock-fill';
                        statusColor = 'var(--warning)';
                        badgeClass = 'badge-in-progress';
                    } else {
                        status = 'No Iniciado';
                        statusIcon = 'circle';
                        statusColor = 'var(--gray-medium)';
                        badgeClass = 'badge-not-started';
                    }

                    return `
                        <div class="breakdown-module-card">
                            <div class="breakdown-header">
                                <i class="bi bi-${statusIcon} breakdown-status-icon" style="color: ${statusColor};"></i>
                                <h6 class="breakdown-title">${module.number}: ${module.title}</h6>
                            </div>
                            <div class="breakdown-progress-bar">
                                <div class="breakdown-progress-fill" style="width: ${percentage}%; background: ${statusColor};"></div>
                            </div>
                            <div class="breakdown-footer">
                                <span class="breakdown-lessons">${completedLessons}/${totalLessons} lecciones</span>
                                <span class="breakdown-badge ${badgeClass}">${status}</span>
                            </div>
                        </div>
                    `;
                }).join('');
            } catch (error) {
                console.error('❌ Error en updateModulesBreakdown:', error);
            }
        }

        // ===== CARGA DE MÓDULOS =====
        function loadModules() {
            const grid = document.getElementById('modulesGrid');
            const progress = getStudentProgress();
            
            grid.innerHTML = '';
            
            modulesData.forEach((module, index) => {
                const moduleProgress = progress?.modules?.[module.id] || {
                    completed: false,
                    progress: 0,
                    completedLessons: []
                };
                
                const card = createModuleCard(module, moduleProgress);
                card.style.animationDelay = `${0.1 * index}s`;
                grid.appendChild(card);
            });
        }

        function createModuleCard(module, moduleProgress) {
            const col = document.createElement('div');
            col.className = 'fade-in-up';

            const moduleLessonsCount = {1: 3, 2: 4, 3: 3};
            const totalLessons = moduleLessonsCount[module.id];
            
            let completedLessons = 0;
            if (moduleProgress && Array.isArray(moduleProgress.completedLessons)) {
                completedLessons = moduleProgress.completedLessons.length;
            }

            const progressValue = Math.round((completedLessons / totalLessons) * 100);
            const isCompleted = completedLessons === totalLessons;

            // Verificar bloqueo
            const progress = getStudentProgress();
            let isLocked = false;
            let lockMessage = '';

            if (module.id === 2) {
                const module1Data = progress?.modules?.[1];
                const module1Completed = module1Data && 
                    Array.isArray(module1Data.completedLessons) && 
                    module1Data.completedLessons.length === moduleLessonsCount[1];
                isLocked = !module1Completed;
                lockMessage = 'Completa el Módulo 1 para desbloquear';
            } else if (module.id === 3) {
                const module2Data = progress?.modules?.[2];
                const module2Completed = module2Data && 
                    Array.isArray(module2Data.completedLessons) && 
                    module2Data.completedLessons.length === moduleLessonsCount[2];
                isLocked = !module2Completed;
                lockMessage = 'Completa el Módulo 2 para desbloquear';
            }

            // Botón de acción
            let actionButton = '';
            if (isLocked) {
                actionButton = `<button class="btn-module locked" disabled><i class="bi bi-lock-fill me-2"></i>Bloqueado</button>`;
            } else if (isCompleted) {
                actionButton = `<a href="${module.url}" class="btn-module btn-secondary-custom"><i class="bi bi-check-circle-fill me-2"></i>Repasar Contenido</a>`;
            } else if (progressValue > 0) {
                actionButton = `<a href="${module.url}" class="btn-module btn-primary-custom"><i class="bi bi-play-circle me-2"></i>Continuar Aprendiendo</a>`;
            } else {
                actionButton = `<a href="${module.url}" class="btn-module btn-primary-custom"><i class="bi bi-play-circle me-2"></i>Comenzar Módulo</a>`;
            }

            const lockedClass = isLocked ? 'locked' : '';
            const lockedOverlay = isLocked ? `<div class="locked-overlay"><i class="bi bi-lock-fill"></i> Bloqueado</div>` : '';
            const lockedMessageHTML = isLocked ? `<div class="locked-message"><i class="bi bi-info-circle-fill"></i>${lockMessage}</div>` : '';

            col.innerHTML = `
                <div class="module-card ${lockedClass}">
                    ${lockedOverlay}
                    <div class="module-header">
                        <span class="module-number">${module.number}</span>
                        <h3 class="module-title">${module.title}</h3>
                        <p class="module-subtitle">${module.subtitle}</p>
                    </div>
                    <div class="module-body">
                        ${lockedMessageHTML}
                        <p class="module-description">${module.description}</p>
                        <div class="module-meta">
                            <span class="meta-item">
                                <i class="bi bi-calendar3"></i>
                                ${module.duration}
                            </span>
                            <span class="meta-item">
                                <i class="bi bi-book"></i>
                                ${module.lessons} lecciones
                            </span>
                            <span class="meta-item">
                                <i class="bi bi-clock"></i>
                                ${module.hours}
                            </span>
                        </div>
                        <div class="module-meta">
                            <span class="meta-item">
                                <i class="bi bi-pencil"></i>
                                ${module.exercises}
                            </span>
                            <span class="meta-item">
                                <i class="bi bi-clipboard-check"></i>
                                ${module.evaluations}
                            </span>
                            <span class="meta-item">
                                <i class="bi bi-bar-chart"></i>
                                ${module.difficulty}
                            </span>
                        </div>
                        <div class="module-progress-container">
                            <div class="module-progress-bar">
                                <div class="module-progress-fill" style="width: ${progressValue}%"></div>
                            </div>
                            <div class="progress-label">${progressValue}% completado (${completedLessons}/${totalLessons} lecciones)</div>
                        </div>
                        <div class="module-actions">
                            ${actionButton}
                        </div>
                    </div>
                </div>
            `;

            return col;
        }

        // ===== INICIALIZACIÓN =====
        document.addEventListener('DOMContentLoaded', function() {
            console.log('🎨 Inicializando LMS mejorado...');
            
            if (!checkAuthentication()) {
                return;
            }

            const user = getCurrentUser();
            if (!user) {
                console.error('❌ No se pudo obtener el usuario');
                window.location.href = 'login.html';
                return;
            }

            console.log('✅ Usuario autenticado:', user.username);
            
            showLoading(true, 'Preparando tu espacio de aprendizaje...');

            // Dar tiempo para que se carguen los datos
            setTimeout(() => {
                try {
                    updateUserInterface();
                    loadModules();
                    showLoading(false);
                    console.log('✅ LMS inicializado correctamente');
                    console.log('🤖 Mentor Anatómico disponible');
                    
                    // Mostrar mensaje de bienvenida
                    showToast('¡Bienvenido de vuelta! Tu progreso está sincronizado', 'success');
                } catch (error) {
                    console.error('❌ Error en inicialización:', error);
                    showLoading(false);
                    showToast('Error al cargar el dashboard. Intenta recargar la página.', 'error');
                }
            }, 500);
        });

        // Auto-guardado periódico
        setInterval(() => {
            if (typeof window.saveProgress === 'function') {
                window.saveProgress();
            }
        }, 120000); // Cada 2 minutos
    </script>

    <!-- IMPORTAR BASE DE CONOCIMIENTO DEL MENTOR -->
    <script src="mentor-knowledge.js"></script>

    <script>
        // ============================================
        // SISTEMA DE MENTOR INTEGRADO
        // ============================================
        
        // Inicializar memoria conversacional
        const conversationMemory = new window.mentorKnowledge.ConversationMemory();
        
        // Elementos del DOM
        const mentorFloatBtn = document.getElementById('mentorFloatBtn');
        const mentorCloseBtn = document.getElementById('mentorCloseBtn');
        const mentorChatContainer = document.getElementById('mentorChatContainer');
        const mentorMessages = document.getElementById('mentorMessages');
        const mentorInput = document.getElementById('mentorInput');
        const mentorSendBtn = document.getElementById('mentorSendBtn');
        const typingIndicator = document.getElementById('typingIndicator');

        // Toggle chat
        const mentorBackdrop = document.getElementById('mentorBackdrop');
        
        mentorFloatBtn.addEventListener('click', function() {
            mentorChatContainer.classList.add('show');
            mentorFloatBtn.style.display = 'none';
            if (mentorBackdrop) mentorBackdrop.classList.add('show');
            
            // Mensaje de bienvenida contextual
            if (mentorMessages.children.length === 0) {
                const greeting = conversationMemory.getContextualGreeting();
                if (greeting) {
                    addMentorMessage(greeting);
                } else {
                    addMentorMessage(
                        "¡Hola! 👋 Soy tu Mentor Anatómico.\n\n**¿En qué puedo ayudarte?**\n\n💙 **Emocional:** Frustración, bloqueo, ansiedad\n🎨 **Técnico:** Línea de acción, proporciones, manos\n📚 **Sistema:** Subir ejercicios, ver progreso",
                        ['Duda técnica', 'Apoyo emocional', 'Info del curso']
                    );
                }
            }
            
            mentorInput.focus();
        });

        function closeMentor() {
            mentorChatContainer.classList.remove('show');
            mentorFloatBtn.style.display = 'flex';
            if (mentorBackdrop) mentorBackdrop.classList.remove('show');
        }

        mentorCloseBtn.addEventListener('click', closeMentor);
        
        // Cerrar al hacer clic en el backdrop
        if (mentorBackdrop) {
            mentorBackdrop.addEventListener('click', closeMentor);
        }
        
        // Prevenir que clics dentro del chat cierren el mentor
        mentorChatContainer.addEventListener('click', function(e) {
            e.stopPropagation();
        });

        // Enviar mensaje
        mentorSendBtn.addEventListener('click', sendMessage);
        mentorInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        });

        // Auto-resize del textarea
        mentorInput.addEventListener('input', function() {
            this.style.height = 'auto';
            this.style.height = Math.min(this.scrollHeight, 100) + 'px';
        });

        function sendMessage() {
            const message = mentorInput.value.trim();
            if (!message) return;

            // Agregar mensaje del usuario
            addUserMessage(message);
            mentorInput.value = '';
            mentorInput.style.height = 'auto';

            // Mostrar indicador de escritura
            showTypingIndicator();

            // Simular delay de respuesta
            setTimeout(() => {
                hideTypingIndicator();
                
                // USAR EL SISTEMA DE MENTOR-KNOWLEDGE.JS
                const response = window.mentorKnowledge.generateResponse(message);
                
                // Guardar en memoria
                conversationMemory.add(message, response.text, response.emotion, response.intensity);
                
                // Mostrar respuesta
                addMentorMessage(response.text, response.actions || []);
                
                // Verificar si debería ofrecer un break
                if (conversationMemory.shouldOfferBreak()) {
                    setTimeout(() => {
                        addMentorMessage(
                            "💙 Noto que estás pasando por un momento difícil.\n\n**¿Quieres tomar un descanso?**\n\nA veces lo mejor es alejarse un rato, tomar aire fresco y volver con energía renovada.",
                            ['Sí, tomaré un break', 'No, estoy bien']
                        );
                    }, 1500);
                }
            }, 800 + Math.random() * 700);
        }

        function addUserMessage(text) {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message user';
            
            const bubble = document.createElement('div');
            bubble.className = 'message-bubble';
            bubble.textContent = text;
            
            messageDiv.appendChild(bubble);
            mentorMessages.appendChild(messageDiv);
            scrollToBottom();
        }

        function addMentorMessage(text, actions = []) {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message mentor';
            
            const bubble = document.createElement('div');
            bubble.className = 'message-bubble';
            bubble.innerHTML = text.replace(/\n/g, '<br>').replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
            
            messageDiv.appendChild(bubble);
            
            // Agregar botones de acción si existen
            if (actions && actions.length > 0) {
                const actionsDiv = document.createElement('div');
                actionsDiv.className = 'message-actions';
                
                actions.forEach(actionText => {
                    const btn = document.createElement('button');
                    btn.className = 'action-button';
                    btn.textContent = actionText;
                    btn.onclick = () => {
                        // Agregar mensaje del usuario visualmente
                        addUserMessage(actionText);
                        
                        // Deshabilitar el botón para evitar doble clic
                        btn.disabled = true;
                        btn.style.opacity = '0.5';
                        
                        // Mostrar indicador de escritura
                        showTypingIndicator();
                        
                        // Generar respuesta contextual
                        setTimeout(() => {
                            hideTypingIndicator();
                            const response = window.mentorKnowledge.generateResponse(actionText);
                            conversationMemory.add(actionText, response.text, response.emotion, response.intensity);
                            addMentorMessage(response.text, response.actions || []);
                        }, 800 + Math.random() * 700);
                    };
                    actionsDiv.appendChild(btn);
                });
                
                bubble.appendChild(actionsDiv);
            }
            
            mentorMessages.appendChild(messageDiv);
            scrollToBottom();
        }

        function showTypingIndicator() {
            typingIndicator.classList.add('show');
            scrollToBottom();
        }

        function hideTypingIndicator() {
            typingIndicator.classList.remove('show');
        }

        function scrollToBottom() {
            setTimeout(() => {
                mentorMessages.scrollTop = mentorMessages.scrollHeight;
            }, 100);
        }
    

        // =====================================================
        // FUNCIONES PARA MODALES Y MEJORAS UX
        // =====================================================

        // ===== CONSTANTES =====
        const MODULE_LESSONS = { 1: 3, 2: 4, 3: 3 }; // Total: 10 lecciones
        const AVG_LESSON_TIME = 45; // minutos por lección
        
        const MOTIVATIONAL_MESSAGES = [
            "¡Excelente progreso! Cada trazo te acerca a tu objetivo.",
            "Tu constancia está dando frutos. ¡Sigue así!",
            "Estás construyendo una base sólida. ¡Muy bien!",
            "El aprendizaje es un viaje, y vas por buen camino.",
            "Cada lección completada es un paso hacia la maestría.",
            "Tu dedicación se refleja en cada ejercicio. ¡Continúa!",
            "Estás demostrando gran compromiso con tu aprendizaje.",
            "El progreso constante siempre supera al talento sin esfuerzo."
        ];

        // ===== MODAL DE ONBOARDING =====
        function checkAndShowOnboarding() {
            const hasSeenOnboarding = localStorage.getItem('onboardingCompleted');
            
            if (!hasSeenOnboarding) {
                const modal = new bootstrap.Modal(document.getElementById('onboardingModal'));
                modal.show();
            }
        }

        function nextOnboardingStep(stepNumber) {
            // Ocultar todos los pasos
            for (let i = 1; i <= 4; i++) {
                document.getElementById(`onboardingStep${i}`).style.display = 'none';
            }
            
            // Mostrar el paso solicitado
            document.getElementById(`onboardingStep${stepNumber}`).style.display = 'block';
        }

        function prevOnboardingStep(stepNumber) {
            nextOnboardingStep(stepNumber);
        }

        function skipOnboarding() {
            localStorage.setItem('onboardingCompleted', 'true');
            const modal = bootstrap.Modal.getInstance(document.getElementById('onboardingModal'));
            modal.hide();
            showToast('Puedes revisar la información del curso en cualquier momento', 'info');
        }

        function finishOnboarding() {
            localStorage.setItem('onboardingCompleted', 'true');
            const modal = bootstrap.Modal.getInstance(document.getElementById('onboardingModal'));
            modal.hide();
            showToast('¡Bienvenido/a! Comienza cuando estés listo/a', 'success');
            
            // Highlight en el botón de siguiente paso
            const nextStepBtn = document.getElementById('nextStepBtn');
            if (nextStepBtn) {
                nextStepBtn.style.animation = 'pulse 1s ease-in-out 3';
            }
        }

        // ===== MODAL DE SESIÓN COMPLETADA =====
        function checkAndShowSessionSummary() {
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.get('showSummary') === 'true') {
                const summaryData = localStorage.getItem('lastSessionSummary');
                
                if (summaryData) {
                    try {
                        const summary = JSON.parse(summaryData);
                        showSessionCompletedModal(summary);
                        localStorage.removeItem('lastSessionSummary');
                        
                        // Limpiar URL sin recargar página
                        window.history.replaceState({}, document.title, window.location.pathname);
                    } catch (error) {
                        console.error('Error mostrando resumen de sesión:', error);
                    }
                }
            }
        }

        function showSessionCompletedModal(summary) {
            // Construir HTML de estadísticas
            const statsHTML = `
                <div class="session-stat">
                    <div class="session-stat-icon">✅</div>
                    <div class="session-stat-number">${summary.lessonsCompleted || 0}</div>
                    <div class="session-stat-label">Lección${summary.lessonsCompleted > 1 ? 'es' : ''} completada${summary.lessonsCompleted > 1 ? 's' : ''}</div>
                </div>
                <div class="session-stat">
                    <div class="session-stat-icon">⏱️</div>
                    <div class="session-stat-number">${summary.timeSpent || 0}</div>
                    <div class="session-stat-label">Minutos de estudio</div>
                </div>
                <div class="session-stat">
                    <div class="session-stat-icon">🎯</div>
                    <div class="session-stat-number">${summary.newConcepts?.length || 0}</div>
                    <div class="session-stat-label">Concepto${summary.newConcepts?.length !== 1 ? 's' : ''} nuevo${summary.newConcepts?.length !== 1 ? 's' : ''}</div>
                </div>
            `;

            // Construir lista de conceptos
            let conceptsHTML = '<h6><i class="bi bi-lightbulb me-2"></i>Conceptos aprendidos en esta sesión:</h6><ul>';
            if (summary.newConcepts && summary.newConcepts.length > 0) {
                summary.newConcepts.forEach(concept => {
                    conceptsHTML += `<li>${concept}</li>`;
                });
            } else {
                conceptsHTML += '<li>Repaso de conceptos anteriores</li>';
            }
            conceptsHTML += '</ul>';

            // Mensaje motivacional aleatorio
            const randomMessage = MOTIVATIONAL_MESSAGES[Math.floor(Math.random() * MOTIVATIONAL_MESSAGES.length)];

            // Próxima lección
            const nextStepText = summary.nextLesson || 'Continúa con el siguiente módulo cuando estés listo/a';

            // Actualizar contenido del modal
            document.getElementById('sessionStatsContainer').innerHTML = statsHTML;
            document.getElementById('conceptsListContainer').innerHTML = conceptsHTML;
            document.getElementById('motivationalMessage').textContent = randomMessage;
            document.getElementById('nextStepSummary').textContent = nextStepText;

            // Mostrar modal
            const modal = new bootstrap.Modal(document.getElementById('sessionSummaryModal'));
            modal.show();

            // Actualizar interfaz principal después de cerrar el modal
            document.getElementById('sessionSummaryModal').addEventListener('hidden.bs.modal', function () {
                updateUserInterface();
            }, { once: true });
        }

        // ===== CALCULAR TIEMPO RESTANTE =====
        function calculateEstimatedCompletion() {
            try {
                const progress = getStudentProgress();
                
                let totalLessons = 0;
                let completedLessons = 0;
                
                Object.keys(MODULE_LESSONS).forEach(moduleId => {
                    totalLessons += MODULE_LESSONS[moduleId];
                    const moduleData = progress?.modules?.[moduleId];
                    if (moduleData && Array.isArray(moduleData.completedLessons)) {
                        completedLessons += moduleData.completedLessons.length;
                    }
                });
                
                const remainingLessons = totalLessons - completedLessons;
                const estimatedMinutes = remainingLessons * AVG_LESSON_TIME;
                const estimatedHours = Math.ceil(estimatedMinutes / 60);
                
                // Calcular fecha estimada (asumiendo 1 lección por día)
                const today = new Date();
                const completionDate = new Date(today);
                completionDate.setDate(today.getDate() + remainingLessons);
                
                return {
                    remainingLessons,
                    estimatedHours,
                    completionDate: completionDate.toLocaleDateString('es-CL', { 
                        day: 'numeric', 
                        month: 'long' 
                    }),
                    percentComplete: Math.round((completedLessons / totalLessons) * 100)
                };
            } catch (error) {
                console.error('Error calculando estimación:', error);
                return {
                    remainingLessons: 10,
                    estimatedHours: 8,
                    completionDate: 'Por determinar',
                    percentComplete: 0
                };
            }
        }

        // ===== ACTUALIZAR HERO "TU SIGUIENTE PASO" =====
        function updateNextTask() {
            try {
                const progress = getStudentProgress();
                const nextStepBtn = document.getElementById('nextStepBtn');
                const nextStepText = document.getElementById('nextStepText');
                const progressInline = document.getElementById('overallProgressInline');
                
                if (!nextStepBtn || !nextStepText) {
                    console.warn('⚠️ Elementos de siguiente paso no encontrados');
                    return;
                }

                let nextModule = 1;
                let nextLesson = 1;
                let buttonText = 'Comenzar Módulo 1, Lección 1';
                let buttonLink = 'module1.html';

                // Buscar la primera lección no completada
                for (let moduleId = 1; moduleId <= 3; moduleId++) {
                    const moduleData = progress?.modules?.[moduleId];
                    const completedLessons = moduleData?.completedLessons || [];
                    const totalLessons = MODULE_LESSONS[moduleId];

                    if (completedLessons.length < totalLessons) {
                        nextModule = moduleId;
                        nextLesson = completedLessons.length + 1;
                        buttonText = `Continuar Módulo ${moduleId}, Lección ${nextLesson}`;
                        buttonLink = `module${moduleId}.html`;
                        break;
                    }
                }

                // Si completó todo
                const overallProgress = calculateOverallProgress();
                if (overallProgress === 100) {
                    buttonText = '¡Curso completado! 🎉';
                    nextStepBtn.classList.remove('btn-light');
                    nextStepBtn.classList.add('btn-success');
                    nextStepBtn.onclick = null;
                    nextStepBtn.style.cursor = 'default';
                } else {
                    nextStepBtn.onclick = () => window.location.href = buttonLink;
                }

                nextStepText.textContent = buttonText;
                
                // Actualizar progreso inline
                if (progressInline) {
                    progressInline.textContent = `${overallProgress}% completado`;
                }

            } catch (error) {
                console.error('❌ Error en updateNextTask:', error);
            }
        }

        // ===== FUNCIÓN PARA IR AL SIGUIENTE PASO =====
        function goToNextStep() {
            const progress = getStudentProgress();
            
            // Buscar la primera lección no completada
            for (let moduleId = 1; moduleId <= 3; moduleId++) {
                const moduleData = progress?.modules?.[moduleId];
                const completedLessons = moduleData?.completedLessons || [];
                const totalLessons = MODULE_LESSONS[moduleId];

                if (completedLessons.length < totalLessons) {
                    window.location.href = `module${moduleId}.html`;
                    return;
                }
            }

            // Si completó todo
            showToast('¡Felicitaciones! Has completado todo el curso 🎉', 'success');
        }

        // ===== TOGGLE DE ACORDEONES =====
        function toggleCollapseIcon(button) {
            const icon = button.querySelector('.collapse-icon');
            const text = button.querySelector('.collapse-text');
            
            // Toggle icono
            if (icon.classList.contains('bi-chevron-down')) {
                icon.classList.remove('bi-chevron-down');
                icon.classList.add('bi-chevron-up');
                icon.classList.add('rotated');
                if (text) text.textContent = text.textContent.replace('Ver más', 'Ocultar');
            } else {
                icon.classList.remove('bi-chevron-up');
                icon.classList.add('bi-chevron-down');
                icon.classList.remove('rotated');
                if (text) text.textContent = text.textContent.replace('Ocultar', 'Ver más');
            }
        }

        // ===== INICIALIZACIÓN AL CARGAR ===== 
        const originalUpdateUserInterface = updateUserInterface;
        updateUserInterface = function() {
            // Llamar a la función original
            originalUpdateUserInterface();
            
            // Agregar actualizaciones adicionales
            updateNextTask();
            
            // Agregar indicador de tiempo restante si no existe
            const statsGrid = document.querySelector('.stats-grid');
            if (statsGrid && !document.getElementById('estimatedTimeRemaining')) {
                const estimation = calculateEstimatedCompletion();
                
                const timeCard = document.createElement('div');
                timeCard.className = 'stat-item';
                timeCard.style.gridColumn = 'span 2';
                timeCard.id = 'estimatedTimeRemaining';
                timeCard.innerHTML = `
                    <i class="bi bi-hourglass-split" style="font-size: 2rem; color: var(--primary-dark);"></i>
                    <span class="stat-number">${estimation.estimatedHours}h</span>
                    <span class="stat-label">Tiempo estimado restante</span>
                    <small class="text-muted mt-1 d-block">Finalización aprox: ${estimation.completionDate}</small>
                `;
                
                statsGrid.appendChild(timeCard);
            }
        };

        // Verificar onboarding y sesión al cargar
        document.addEventListener('DOMContentLoaded', function() {
            // Esperar a que se cargue el usuario
            setTimeout(() => {
                checkAndShowOnboarding();
                checkAndShowSessionSummary();
            }, 1000);
        });

        // Toast mejorado
        function showToast(message, type = 'info') {
            const colors = { 
                success: '#4CAF50', 
                warning: '#FFC107', 
                info: '#2196F3', 
                danger: '#f44336' 
            };
            const icons = { 
                success: 'check-circle-fill', 
                warning: 'exclamation-triangle-fill', 
                info: 'info-circle-fill', 
                danger: 'x-circle-fill' 
            };
            
            const toast = document.createElement('div');
            toast.style.cssText = `
                position: fixed; 
                top: 80px; 
                right: 20px; 
                background: ${colors[type]}; 
                color: white; 
                padding: 1rem 1.5rem; 
                border-radius: 8px; 
                box-shadow: 0 4px 12px rgba(0,0,0,0.3); 
                z-index: 9999; 
                animation: slideIn 0.3s;
                max-width: 400px;
            `;
            toast.innerHTML = `
                <i class="bi bi-${icons[type]}" style="font-size: 1.25rem; margin-right: 0.75rem;"></i>
                <span>${message}</span>
            `;
            
            document.body.appendChild(toast);
            setTimeout(() => {
                toast.style.animation = 'slideOut 0.3s';
                setTimeout(() => toast.remove(), 300);
            }, 4000);
        }

</script>



    <!-- ============================================ -->
    <!-- MODAL DE ONBOARDING (Primera Visita)        -->
    <!-- ============================================ -->
    <div class="modal fade onboarding-modal" id="onboardingModal" tabindex="-1" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
                <!-- Paso 1 -->
                <div class="onboarding-step" id="onboardingStep1">
                    <div class="onboarding-header">
                        <h2>¡Bienvenido/a al Curso! 🎨</h2>
                    </div>
                    <div class="onboarding-icon">🎓</div>
                    <h4>Aprenderás a dibujar el cuerpo humano desde cero</h4>
                    <p class="text-muted">Este curso está diseñado en 3 módulos secuenciales que te guiarán desde la observación básica hasta la representación completa de la figura humana.</p>
                    <div class="onboarding-progress">
                        <div class="progress-dot active"></div>
                        <div class="progress-dot"></div>
                        <div class="progress-dot"></div>
                        <div class="progress-dot"></div>
                    </div>
                    <div class="mt-4 d-flex gap-3">
                        <button class="btn btn-outline-secondary" onclick="skipOnboarding()">Omitir tour</button>
                        <button class="btn btn-primary btn-lg" onclick="nextOnboardingStep(2)">Siguiente</button>
                    </div>
                </div>

                <!-- Paso 2 -->
                <div class="onboarding-step" id="onboardingStep2" style="display: none;">
                    <div class="onboarding-header">
                        <h2>Tu Ruta de Aprendizaje 📚</h2>
                    </div>
                    <div class="roadmap-visual">
                        <div class="roadmap-step">M1</div>
                        <div class="roadmap-arrow">→</div>
                        <div class="roadmap-step">M2</div>
                        <div class="roadmap-arrow">→</div>
                        <div class="roadmap-step">M3</div>
                    </div>
                    <h5>Los 3 módulos del curso:</h5>
                    <ul class="text-start mt-3" style="max-width: 500px;">
                        <li><strong>Módulo 1:</strong> Observación y Gesto</li>
                        <li><strong>Módulo 2:</strong> Anatomía Funcional</li>
                        <li><strong>Módulo 3:</strong> Figura Completa e Integración</li>
                    </ul>
                    <div class="onboarding-progress">
                        <div class="progress-dot"></div>
                        <div class="progress-dot active"></div>
                        <div class="progress-dot"></div>
                        <div class="progress-dot"></div>
                    </div>
                    <div class="mt-4 d-flex gap-3">
                        <button class="btn btn-outline-secondary" onclick="prevOnboardingStep(1)">Atrás</button>
                        <button class="btn btn-outline-secondary" onclick="skipOnboarding()">Omitir tour</button>
                        <button class="btn btn-primary btn-lg" onclick="nextOnboardingStep(3)">Siguiente</button>
                    </div>
                </div>

                <!-- Paso 3 -->
                <div class="onboarding-step" id="onboardingStep3" style="display: none;">
                    <div class="onboarding-header">
                        <h2>Comienza Aquí 🚀</h2>
                    </div>
                    <div class="onboarding-icon">📝</div>
                    <h4>Tu primer objetivo</h4>
                    <p class="text-muted">Completar <strong>Módulo 1, Lección 1</strong></p>
                    <p class="small text-muted">(Duración estimada: 45 minutos)</p>
                    <div class="alert alert-info mt-3" style="max-width: 500px;">
                        <i class="bi bi-lightbulb me-2"></i>
                        Cada lección incluye teoría, referencias visuales, ejercicios prácticos y una evaluación breve.
                    </div>
                    <div class="onboarding-progress">
                        <div class="progress-dot"></div>
                        <div class="progress-dot"></div>
                        <div class="progress-dot active"></div>
                        <div class="progress-dot"></div>
                    </div>
                    <div class="mt-4 d-flex gap-3">
                        <button class="btn btn-outline-secondary" onclick="prevOnboardingStep(2)">Atrás</button>
                        <button class="btn btn-outline-secondary" onclick="skipOnboarding()">Omitir tour</button>
                        <button class="btn btn-success btn-lg" onclick="nextOnboardingStep(4)">Siguiente</button>
                    </div>
                </div>

                <!-- Paso 4 -->
                <div class="onboarding-step" id="onboardingStep4" style="display: none;">
                    <div class="onboarding-header">
                        <h2>Tu Mentor IA está disponible 24/7 🤖</h2>
                    </div>
                    <div class="onboarding-icon">💬</div>
                    <h4>¿Tienes dudas?</h4>
                    <p class="text-muted">Haz clic en el <strong>botón flotante</strong> en la esquina inferior derecha para acceder al Mentor Anatómico IA.</p>
                    <div class="alert alert-success mt-3" style="max-width: 500px;">
                        <i class="bi bi-check-circle me-2"></i>
                        El mentor puede ayudarte con dudas técnicas, conceptos anatómicos y apoyo emocional cuando lo necesites.
                    </div>
                    <div class="onboarding-progress">
                        <div class="progress-dot"></div>
                        <div class="progress-dot"></div>
                        <div class="progress-dot"></div>
                        <div class="progress-dot active"></div>
                    </div>
                    <div class="mt-4 d-flex gap-3">
                        <button class="btn btn-outline-secondary" onclick="prevOnboardingStep(3)">Atrás</button>
                        <button class="btn btn-success btn-lg" onclick="finishOnboarding()">
                            <i class="bi bi-rocket-takeoff me-2"></i>Comenzar Curso
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ============================================ -->
    <!-- MODAL DE SESIÓN COMPLETADA                  -->
    <!-- ============================================ -->
    <div class="modal fade session-summary-modal" id="sessionSummaryModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
                <div class="session-header">
                    <h2><i class="bi bi-trophy-fill me-2"></i>¡Sesión completada!</h2>
                    <p class="mb-0">Excelente trabajo en tu última sesión de estudio</p>
                </div>
                
                <div class="session-stats" id="sessionStatsContainer">
                    <!-- Contenido dinámico -->
                </div>

                <div class="modal-body">
                    <div class="concepts-list" id="conceptsListContainer">
                        <!-- Contenido dinámico -->
                    </div>

                    <div class="motivational-message" id="motivationalMessage">
                        <!-- Mensaje dinámico -->
                    </div>

                    <div class="alert alert-info">
                        <h6><i class="bi bi-compass me-2"></i>Tu siguiente paso:</h6>
                        <p class="mb-0" id="nextStepSummary"><!-- Contenido dinámico --></p>
                    </div>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cerrar</button>
                    <button type="button" class="btn btn-primary" onclick="goToNextStep()">
                        <i class="bi bi-arrow-right me-2"></i>Ir a siguiente lección
                    </button>
                </div>
            </div>
        </div>
    </div>

</body>
</html>
